"use strict";(self.webpackChunkmichi_vz=self.webpackChunkmichi_vz||[]).push([[384],{"./src/components/ScatterPlotChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_ScatterPlotChart});var _templateObject,react=__webpack_require__("./node_modules/react/index.js"),useDefaultConfig=__webpack_require__("./src/components/hooks/useDefaultConfig.ts"),src=__webpack_require__("./node_modules/d3/src/index.js"),Title=__webpack_require__("./src/components/shared/Title.tsx"),XaxisLinear=__webpack_require__("./src/components/shared/XaxisLinear.tsx"),XaxisBand=__webpack_require__("./src/components/shared/XaxisBand.tsx"),YaxisLinear=__webpack_require__("./src/components/shared/YaxisLinear.tsx"),MichiVzProvider=__webpack_require__("./src/components/MichiVzProvider.tsx"),drawHalfLeftCircle=function drawHalfLeftCircle(x,y,radiusX,radiusY){return"M ".concat(x,",").concat(y," A ").concat(radiusX,",").concat(radiusY," 0 0 1, ").concat(x," ").concat(y-radiusX-radiusY)},useDisplayIsNodata=__webpack_require__("./src/components/hooks/useDisplayIsNodata.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),use_deep_compare_effect_esm=__webpack_require__("./node_modules/use-deep-compare-effect/dist/use-deep-compare-effect.esm.js"),LoadingIndicator=__webpack_require__("./src/components/shared/LoadingIndicator.tsx");function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var Styled=styled_components_browser_esm.Ay.div(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  .shape {\n    width: 100%;\n    height: 100%;\n    background-color: var(--data-background);\n  }\n\n  .shape-circle {\n    border-radius: 50%;\n  }\n\n  .shape-square {\n    border-radius: 0;\n  }\n\n  .shape-triangle {\n    width: 0;\n    height: 0;\n    border-width: 0 calc(var(--data-size) / 2) var(--data-size) calc(var(--data-size) / 2);\n    border-color: transparent transparent var(--data-background) transparent;\n    border-style: solid;\n    background: transparent !important;\n  }\n\n  circle,\n  rect,\n  path {\n    transition-property: all;\n    transition-duration: 0.1s;\n    transition-timing-function: ease-out;\n    transition-behavior: allow-discrete;\n  }\n\n  /* Override any existing tooltip styles */\n  .tooltip {\n    position: absolute !important;\n    display: none !important;\n    padding: 10px !important;\n    background-color: rgba(0, 0, 0, 0.8) !important;\n    color: white !important;\n    border-radius: 5px !important;\n    pointer-events: none !important;\n    z-index: 1000 !important;\n    font-size: 12px !important;\n    white-space: nowrap !important;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;\n    transform: none !important;\n    transition: none !important;\n    animation: none !important;\n  }\n"]))),ScatterPlotChart=function ScatterPlotChart(_ref){var _ref$dataSet=_ref.dataSet,dataSet=void 0===_ref$dataSet?[]:_ref$dataSet,_ref$width=_ref.width,width=void 0===_ref$width?useDefaultConfig.A.WIDTH:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?useDefaultConfig.A.HEIGHT:_ref$height,_ref$margin=_ref.margin,margin=void 0===_ref$margin?useDefaultConfig.A.MARGIN:_ref$margin,title=_ref.title,children=_ref.children,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,isLoadingComponent=_ref.isLoadingComponent,isNodataComponent=_ref.isNodataComponent,isNodata=_ref.isNodata,xAxisFormat=_ref.xAxisFormat,yAxisFormat=_ref.yAxisFormat,yTicksQty=_ref.yTicksQty,_ref$xAxisDataType=_ref.xAxisDataType,xAxisDataType=void 0===_ref$xAxisDataType?"number":_ref$xAxisDataType,tooltipFormatter=_ref.tooltipFormatter,_ref$showGrid=_ref.showGrid,showGrid=void 0===_ref$showGrid?useDefaultConfig.A.SHOW_GRID:_ref$showGrid,xAxisDomain=_ref.xAxisDomain,yAxisDomain=_ref.yAxisDomain,dScaleLegend=_ref.dScaleLegend,dScaleLegendFormatter=_ref.dScaleLegendFormatter,filter=_ref.filter,onChartDataProcessed=_ref.onChartDataProcessed,onHighlightItem=_ref.onHighlightItem,ref=(0,react.useRef)(null),tooltipRef=(0,react.useRef)(null),svgContainerRef=(0,react.useRef)(null),_useState2=_slicedToArray((0,react.useState)(null),2),activePoint=_useState2[0],setActivePoint=_useState2[1],_useChartContext=(0,MichiVzProvider.N)(),colorsMapping=_useChartContext.colorsMapping,highlightItems=_useChartContext.highlightItems,disabledItems=_useChartContext.disabledItems,renderCompleteRef=(0,react.useRef)(!1),prevChartDataRef=(0,react.useRef)(null);(0,react.useLayoutEffect)((function(){renderCompleteRef.current=!0}),[]);var filteredDataSet=(0,react.useMemo)((function(){if(!filter)return dataSet;var dateFiltered=dataSet;return filter.date&&(dateFiltered=dataSet.filter((function(d){return d.date===filter.date}))),dateFiltered.filter((function(d){return!disabledItems.includes(d.label)})).slice().sort((function(a,b){var aVal=a[filter.criteria],bVal=b[filter.criteria];return"desc"===filter.sortingDir?bVal-aVal:aVal-bVal})).slice(0,filter.limit)}),[dataSet,filter,disabledItems]),renderOrderedDataSet=(0,react.useMemo)((function(){return _toConsumableArray(filteredDataSet).sort((function(a,b){return b.d-a.d}))}),[filteredDataSet]),xValues=(0,react.useMemo)((function(){return filteredDataSet.map((function(d){return d.x||0}))}),[filteredDataSet]),yValues=(0,react.useMemo)((function(){return filteredDataSet.map((function(d){return d.y||0}))}),[filteredDataSet]),xDomain=(0,react.useMemo)((function(){return[0,Math.max.apply(Math,_toConsumableArray(xValues))||0]}),[xValues]),yDomain=(0,react.useMemo)((function(){return[0,Math.max.apply(Math,_toConsumableArray(yValues))||0]}),[yValues]),xScale=(0,react.useMemo)((function(){var _ref2;return"number"===xAxisDataType?src.scaleLinear().domain(null!==(_ref2=xAxisDomain)&&void 0!==_ref2?_ref2:xDomain).range([margin.left,width-margin.right]).nice().clamp(!0):"date_annual"===xAxisDataType||"date_monthly"===xAxisDataType?src.scaleTime().domain(xDomain).range([margin.left,width-margin.right]).nice().clamp(!0):"band"===xAxisDataType?src.scaleBand().domain(dataSet.map((function(d){return d.label}))).range([margin.left,width-margin.right]).padding(.1):void 0}),[xDomain,width,margin]),yScale=(0,react.useMemo)((function(){var _ref3;return src.scaleLinear().domain(null!==(_ref3=yAxisDomain)&&void 0!==_ref3?_ref3:yDomain).range([height-margin.bottom,margin.top])}),[yDomain,height,margin]),dValues=(0,react.useMemo)((function(){return dataSet.map((function(d){return d.d}))}),[dataSet]),dMax=(0,react.useMemo)((function(){return Math.max.apply(Math,_toConsumableArray(dValues))}),[dValues]),dMin=(0,react.useMemo)((function(){return Math.min.apply(Math,_toConsumableArray(dValues))}),[dValues]),dDomain=(0,react.useMemo)((function(){return dMax===dMin?[0,dMax]:[dMin,dMax]}),[dMin,dMax]),dScale=(0,react.useMemo)((function(){return src.scaleLinear().domain(dDomain).range([16,80])}),[dDomain,height,width,margin]),dLegendPosition=(0,react.useMemo)((function(){return{x:width-100,y:height/3}}),[width,height]),getXValue=(0,react.useCallback)((function(d){var offSet="bandwidth"in xScale?(null==xScale?void 0:xScale.bandwidth())/2:0;return"band"===xAxisDataType?xScale(d.label)+offSet:xScale(d.x)}),[xScale,xAxisDataType]);(0,react.useEffect)((function(){var svg=src.select(ref.current);0!==highlightItems.length?(svg.selectAll("foreignObject[data-label]").style("opacity",.1),highlightItems.forEach((function(label){svg.selectAll('foreignObject[data-label="'.concat(label,'"]')).style("opacity",1)}))):svg.selectAll("foreignObject").style("opacity",.9)}),[highlightItems]),(0,react.useEffect)((function(){if(!tooltipRef.current){var tooltip=document.createElement("div");tooltip.className="tooltip",tooltip.style.cssText="\n        position: absolute;\n        background-color: #fff;\n        display: none;\n        padding: 10px;\n        border-radius: 5px;\n        pointer-events: none;\n        z-index: 1000;\n        transition: none;\n        animation: none;\n        transform: none;\n      ",document.body.appendChild(tooltip),tooltipRef.current=tooltip}return function(){tooltipRef.current&&document.body.removeChild(tooltipRef.current)}}),[]);var handleMouseEnter=(0,react.useCallback)((function(event,d){if(setActivePoint(d),onHighlightItem([d.label]),tooltipRef.current){var x=event.clientX,y=event.clientY,content="";content=tooltipFormatter?tooltipFormatter(d):"\n          <div>\n            <div>".concat(d.label,"</div>\n            <div>").concat(xAxisFormat?xAxisFormat(d.x):d.x,"</div>\n            <div>").concat(yAxisFormat?yAxisFormat(d.y):d.y,"</div>\n          </div>\n        "),tooltipRef.current.innerHTML=content,tooltipRef.current.style.left="".concat(x+10,"px"),tooltipRef.current.style.top="".concat(y-10,"px"),tooltipRef.current.style.display="block"}}),[onHighlightItem,tooltipFormatter,xAxisFormat,yAxisFormat]),handleSvgMouseMove=(0,react.useCallback)((function(event){activePoint&&tooltipRef.current&&(tooltipRef.current.style.left="".concat(event.clientX+10,"px"),tooltipRef.current.style.top="".concat(event.clientY-10,"px"))}),[activePoint]),handleMouseLeave=(0,react.useCallback)((function(){setActivePoint(null),onHighlightItem([]),tooltipRef.current&&(tooltipRef.current.style.display="none")}),[onHighlightItem]),displayIsNodata=(0,useDisplayIsNodata.x)({dataSet,isLoading,isNodataComponent,isNodata});return(0,use_deep_compare_effect_esm.Ay)((function(){if(renderCompleteRef.current&&onChartDataProcessed){var currentMetadata={xAxisDomain:xValues.map(String),yAxisDomain:yScale.domain(),visibleItems:filteredDataSet.map((function(d){return d.label})),renderedData:{points:renderOrderedDataSet},chartType:"scatter-plot-chart"};(!prevChartDataRef.current||JSON.stringify(prevChartDataRef.current.xAxisDomain)!==JSON.stringify(currentMetadata.xAxisDomain)||JSON.stringify(prevChartDataRef.current.yAxisDomain)!==JSON.stringify(currentMetadata.yAxisDomain)||JSON.stringify(prevChartDataRef.current.visibleItems)!==JSON.stringify(currentMetadata.visibleItems)||JSON.stringify(Object.keys(prevChartDataRef.current.renderedData).sort())!==JSON.stringify(Object.keys(currentMetadata.renderedData).sort()))&&onChartDataProcessed(currentMetadata),prevChartDataRef.current=currentMetadata}}),[renderOrderedDataSet,xValues,yScale,filteredDataSet,onChartDataProcessed]),react.createElement(Styled,{style:{position:"relative"}},react.createElement("div",{ref:svgContainerRef,style:{position:"relative",width,height}},isLoading?react.createElement(LoadingIndicator.A,null):react.createElement(react.Suspense,{fallback:react.createElement(LoadingIndicator.A,null)},react.createElement("svg",{width,height,ref,onMouseMove:handleSvgMouseMove},react.createElement(Title.A,{x:width/2,y:margin.top/2},title),children,renderOrderedDataSet.filter((function(d){return!disabledItems.includes(d.label)})).map((function(d,i){var x=getXValue(d),y=yScale(d.y),size="band"===xAxisDataType?d.d/2:dScale(d.d),radius=size/2,fill=(null==colorsMapping?void 0:colorsMapping[d.label])||d.color||"transparent";return react.createElement("g",{key:i,transform:"translate(".concat(x,", ").concat(y,")"),opacity:.9,"data-label":d.label,onMouseEnter:function onMouseEnter(event){return handleMouseEnter(event,d)},onMouseLeave:handleMouseLeave},"square"===d.shape?react.createElement("rect",{x:-radius,y:-radius,width:size,height:size,fill,stroke:"#fff",strokeWidth:2}):"triangle"===d.shape?react.createElement("path",{d:"M0,".concat(-radius," L").concat(radius,",").concat(radius," L").concat(-radius,",").concat(radius," Z"),fill,stroke:"#fff",strokeWidth:2}):react.createElement("circle",{r:radius,fill,stroke:"#fff",strokeWidth:2}))})),!isLoading&&dataSet.length&&react.createElement("g",{className:"michi-vz-legend"},dScaleLegendFormatter&&dScaleLegendFormatter(dDomain,dScale),(null==dScaleLegend?void 0:dScaleLegend.title)&&react.createElement("text",{x:dLegendPosition.x,y:dLegendPosition.y-120,textAnchor:"middle"},null==dScaleLegend?void 0:dScaleLegend.title),react.createElement("path",{d:drawHalfLeftCircle(dLegendPosition.x,dLegendPosition.y,40,40),fill:"none",stroke:"#ccc"}),react.createElement("path",{d:drawHalfLeftCircle(dLegendPosition.x,dLegendPosition.y,20,20),fill:"none",stroke:"#ccc"}),react.createElement("path",{d:drawHalfLeftCircle(dLegendPosition.x,dLegendPosition.y,8,8),fill:"none",stroke:"#ccc"}),react.createElement("text",{x:dLegendPosition.x,y:dLegendPosition.y},null!=dScaleLegend&&dScaleLegend.valueFormatter?dScaleLegend.valueFormatter(dScale.invert(16)):dScale.invert(16)),react.createElement("text",{x:dLegendPosition.x,y:dLegendPosition.y-40},null!=dScaleLegend&&dScaleLegend.valueFormatter?dScaleLegend.valueFormatter(dScale.invert(40)):dScale.invert(40)),react.createElement("text",{x:dLegendPosition.x,y:dLegendPosition.y-80},null!=dScaleLegend&&dScaleLegend.valueFormatter?dScaleLegend.valueFormatter(dScale.invert(80)):dScale.invert(80))),"number"===xAxisDataType||"date_annual"===xAxisDataType||"date_monthly"===xAxisDataType?react.createElement(XaxisLinear.A,{xScale,height,margin,xAxisFormat,xAxisDataType,ticks:5,showGrid:(null==showGrid?void 0:showGrid.x)||!1}):react.createElement(XaxisBand.A,{xScale,height,margin,xAxisFormat}),react.createElement(YaxisLinear.A,{yScale,width,height,margin,yAxisFormat,yTicksQty}))),isLoading&&isLoadingComponent&&react.createElement(react.Fragment,null,isLoadingComponent),displayIsNodata&&react.createElement(react.Fragment,null,isNodataComponent)))};const components_ScatterPlotChart=ScatterPlotChart;ScatterPlotChart.__docgenInfo={description:"",methods:[],displayName:"ScatterPlotChart",props:{dataSet:{required:!1,tsType:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]"},description:"",defaultValue:{value:"[]",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"900",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},margin:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ top: 50, right: 50, bottom: 50, left: 50 }",computed:!1}},title:{required:!0,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isLoadingComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodataComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodata:{required:!1,tsType:{name:"union",raw:"boolean | ((dataSet: DataPoint[]) => boolean)",elements:[{name:"boolean"},{name:"unknown"}]},description:""},xAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number | string) => string",signature:{arguments:[{type:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},name:"d"}],return:{name:"string"}}},description:""},yAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number | string) => string",signature:{arguments:[{type:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},name:"d"}],return:{name:"string"}}},description:""},yTicksQty:{required:!1,tsType:{name:"number"},description:""},xAxisDataType:{required:!1,tsType:{name:"union",raw:'"number" | "date_annual" | "date_monthly" | "band"',elements:[{name:"literal",value:'"number"'},{name:"literal",value:'"date_annual"'},{name:"literal",value:'"date_monthly"'},{name:"literal",value:'"band"'}]},description:"",defaultValue:{value:'"number"',computed:!1}},tooltipFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: DataPoint) => string",signature:{arguments:[{type:{name:"DataPoint"},name:"d"}],return:{name:"string"}}},description:""},showGrid:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: boolean; y: boolean }",signature:{properties:[{key:"x",value:{name:"boolean",required:!0}},{key:"y",value:{name:"boolean",required:!0}}]}},description:"",defaultValue:{value:"{\r\n  x: false,\r\n  y: false,\r\n}",computed:!1}},xAxisDomain:{required:!1,tsType:{name:"tuple",raw:"[T, T]",elements:[{name:"T"},{name:"T"}]},description:""},yAxisDomain:{required:!1,tsType:{name:"tuple",raw:"[T, T]",elements:[{name:"T"},{name:"T"}]},description:""},dScaleLegend:{required:!1,tsType:{name:"signature",type:"object",raw:"{\r\n  title?: string;\r\n  valueFormatter?: (d: number) => string;\r\n}",signature:{properties:[{key:"title",value:{name:"string",required:!1}},{key:"valueFormatter",value:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}},required:!1}}]}},description:""},dScaleLegendFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(domain: number[], dScale: d3.ScaleLinear<number, number>) => string",signature:{arguments:[{type:{name:"Array",elements:[{name:"number"}],raw:"number[]"},name:"domain"},{type:{name:"d3.ScaleLinear",elements:[{name:"number"},{name:"number"}],raw:"d3.ScaleLinear<number, number>"},name:"dScale"}],return:{name:"string"}}},description:""},filter:{required:!1,tsType:{name:"signature",type:"object",raw:'{\r\n  limit: number;\r\n  criteria: "x" | "y" | "d"; // Sort by x, y, or d values\r\n  sortingDir: "asc" | "desc";\r\n  date?: string; // Added date property for filtering by date\r\n}',signature:{properties:[{key:"limit",value:{name:"number",required:!0}},{key:"criteria",value:{name:"union",raw:'"x" | "y" | "d"',elements:[{name:"literal",value:'"x"'},{name:"literal",value:'"y"'},{name:"literal",value:'"d"'}],required:!0}},{key:"sortingDir",value:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}],required:!0}},{key:"date",value:{name:"string",required:!1}}]}},description:""},onChartDataProcessed:{required:!1,tsType:{name:"signature",type:"function",raw:"(metadata: ChartMetadata) => void",signature:{arguments:[{type:{name:"ChartMetadata"},name:"metadata"}],return:{name:"void"}}},description:""},onHighlightItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(labels: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"labels"}],return:{name:"void"}}},description:""}}}},"./src/components/hooks/useDefaultConfig.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={MARGIN:{top:50,right:50,bottom:50,left:50},WIDTH:900,HEIGHT:500,SHOW_GRID:{x:!1,y:!1}}},"./src/components/shared/XaxisBand.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3/src/index.js"),XaxisBand=function XaxisBand(_ref){var xScale=_ref.xScale,height=_ref.height,margin=_ref.margin,xAxisFormat=_ref.xAxisFormat,_ref$ticks=(_ref.xAxisDataType,_ref.ticks),ticks=void 0===_ref$ticks?15:_ref$ticks,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,_ref$isEmpty=_ref.isEmpty,isEmpty=void 0!==_ref$isEmpty&&_ref$isEmpty,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),renderedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),tickValues=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if(isLoading||isEmpty)return[];var domain=xScale.domain();if(0===domain.length)return[];if(1===domain.length)return domain;var first=domain[0],last=domain[domain.length-1],availableWidth=xScale.range()[1]-xScale.range()[0],maxFittingTicks=Math.floor(availableWidth/80),effectiveTicks=Math.max(2,Math.min(maxFittingTicks,ticks));if(effectiveTicks<=2||domain.length<=2)return[first,last];if(domain.length<=effectiveTicks)return domain;var result=[first];if(effectiveTicks>2)for(var step=(domain.length-1)/(effectiveTicks-1),i=1;i<effectiveTicks-1;i++){var index=Math.round(i*step);index>0&&index<domain.length-1&&result.push(domain[index])}return result.push(last),result}),[xScale,ticks,isLoading,isEmpty]),formatter=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(d){return xAxisFormat?xAxisFormat(d):String(d)}),[xAxisFormat]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){if(ref.current&&xScale&&!renderedRef.current){var xAxis=d3__WEBPACK_IMPORTED_MODULE_1__.axisBottom(xScale).tickFormat(formatter).tickSizeOuter(0).tickValues(tickValues);d3__WEBPACK_IMPORTED_MODULE_1__.select(ref.current).call(xAxis).selectAll("text").attr("y",margin.bottom/2).attr("dx","0em").attr("dy","0.5em"),renderedRef.current=!0}}),[xScale,margin.bottom,formatter,tickValues]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){var g=d3__WEBPACK_IMPORTED_MODULE_1__.select(ref.current);if(g&&tickValues.length){g.selectAll("*").remove();var axisGroup=g.attr("transform","translate(0,".concat(height-margin.bottom+25,")")),axisCall=d3__WEBPACK_IMPORTED_MODULE_1__.axisBottom(xScale).tickValues(tickValues).tickFormat(formatter);renderedRef.current?axisGroup.call(axisCall):(axisGroup.transition().duration(500).call(axisCall),renderedRef.current=!0),axisGroup.select(".domain").remove(),axisGroup.selectAll(".tick line").remove(),axisGroup.selectAll(".tick text").attr("transform","rotate(0)").style("text-anchor","middle").attr("dx","0").attr("dy","0.71em");var tickGroups=axisGroup.selectAll(".tick");tickGroups.selectAll(".tick-line").remove(),tickGroups.append("line").attr("class","tick-line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",-height+margin.bottom-25).attr("pointer-events","none").style("stroke-dasharray","3,3").style("stroke","transparent").style("opacity",1);var dots=tickGroups.selectAll(".tickValueDot").data([0]);dots.enter().append("circle").attr("class","tickValueDot").merge(dots).attr("cx",0).attr("cy",0).attr("r",2).attr("fill","lightgray").style("opacity",1),dots.exit().remove(),tickGroups.append("circle").attr("class","tickValueDot-interactive").attr("cx",0).attr("cy",0).attr("r",2).attr("fill","lightgray").style("opacity",1).on("mouseover",(function(){d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("r",4).attr("fill","#666")})).on("mouseout",(function(){d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("r",2).attr("fill","lightgray")}))}}),[xScale,height,margin,tickValues,formatter]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{ref,className:"x-axis x-axis-band"})};const __WEBPACK_DEFAULT_EXPORT__=react__WEBPACK_IMPORTED_MODULE_0__.memo(XaxisBand);XaxisBand.__docgenInfo={description:"",methods:[],displayName:"XaxisBand",props:{xScale:{required:!0,tsType:{name:"ScaleBand",elements:[{name:"string"}],raw:"ScaleBand<string>"},description:""},height:{required:!0,tsType:{name:"number"},description:""},margin:{required:!0,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:""},xAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: string | number) => string",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"d"}],return:{name:"string"}}},description:""},xAxisDataType:{required:!1,tsType:{name:"union",raw:'"text" | "number"',elements:[{name:"literal",value:'"text"'},{name:"literal",value:'"number"'}]},description:"",defaultValue:{value:'"text"',computed:!1}},ticks:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"15",computed:!1}},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isEmpty:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}}}]);