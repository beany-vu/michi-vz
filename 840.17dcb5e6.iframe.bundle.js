"use strict";(self.webpackChunkmichi_vz=self.webpackChunkmichi_vz||[]).push([[840],{"./src/components/LineChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _templateObject,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3/src/index.js"),_shared_Title__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/shared/Title.tsx"),_shared_YaxisLinear__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/shared/YaxisLinear.tsx"),_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/shared/XaxisLinear.tsx"),_MichiVzProvider__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/MichiVzProvider.tsx"),_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/shared/LoadingIndicator.tsx"),_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/hooks/useDisplayIsNodata.ts"),styled_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var MARGIN={top:50,right:50,bottom:50,left:50},WIDTH=900-MARGIN.left-MARGIN.right,HEIGHT=480-MARGIN.top-MARGIN.bottom,LineChartContainer=styled_components__WEBPACK_IMPORTED_MODULE_8__.Ay.div(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  position: relative;\n  contain: layout paint;\n  content-visibility: auto;\n  path {\n    transition:\n      stroke 0.3s ease-out,\n      opacity 0.3s ease-out;\n    transition-behavior: allow-discrete;\n    will-change: stroke, opacity, d;\n  }\n\n  circle,\n  rect,\n  path.data-point {\n    transition:\n      fill 0.3s ease-out,\n      stroke 0.3s ease-out,\n      opacity 0.3s ease-out;\n    will-change: fill, stroke, opacity;\n  }\n\n  .data-group {\n    transition: opacity 0.3s ease-out;\n  }\n\n  /* Enhanced line-overlay styling for better hover targeting */\n  .line-overlay {\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    cursor: pointer;\n    /* Critical for proper hover behavior */\n    pointer-events: stroke;\n    /* Always ensure it's visible for hover but transparent visually */\n    opacity: 0.05 !important;\n  }\n"]))),LineChart=function LineChart(_ref){var dataSet=_ref.dataSet,filter=_ref.filter,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?WIDTH:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?HEIGHT:_ref$height,_ref$margin=_ref.margin,margin=void 0===_ref$margin?MARGIN:_ref$margin,yAxisDomain=_ref.yAxisDomain,yAxisFormat=_ref.yAxisFormat,_ref$xAxisDataType=_ref.xAxisDataType,xAxisDataType=void 0===_ref$xAxisDataType?"number":_ref$xAxisDataType,xAxisFormat=_ref.xAxisFormat,_ref$tooltipFormatter=_ref.tooltipFormatter,tooltipFormatter=void 0===_ref$tooltipFormatter?function(d){return"<div>".concat(d.label," - ").concat(d.date,": ").concat(d.value,"</div>")}:_ref$tooltipFormatter,_ref$showCombined=_ref.showCombined,showCombined=void 0!==_ref$showCombined&&_ref$showCombined,children=_ref.children,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,isLoadingComponent=_ref.isLoadingComponent,isNodataComponent=_ref.isNodataComponent,isNodata=_ref.isNodata,onChartDataProcessed=_ref.onChartDataProcessed,onHighlightItem=_ref.onHighlightItem,_ref$ticks=_ref.ticks,ticks=void 0===_ref$ticks?5:_ref$ticks,_useChartContext=(0,_MichiVzProvider__WEBPACK_IMPORTED_MODULE_5__.N)(),colorsMapping=_useChartContext.colorsMapping,highlightItems=_useChartContext.highlightItems,disabledItems=_useChartContext.disabledItems,svgRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),tooltipRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),renderCompleteRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),prevChartDataRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isProcessing=_useState2[0],setIsProcessing=_useState2[1],isInitialMount=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0),TRANSITION_EASE=d3__WEBPACK_IMPORTED_MODULE_1__.easeQuadOut,getColor=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(mappedColor,dataColor){return mappedColor||(dataColor||"rgba(253, 253, 253, 0.5)")}),[]),sanitizeForClassName=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(str){return str.replace(/[^a-z0-9]/gi,"_")}),[]),filteredDataSet=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if(!filter)return dataSet.filter((function(d){return!disabledItems.includes(d.label)}));var result=dataSet.filter((function(d){return!disabledItems.includes(d.label)}));return(result=result.filter((function(item){return void 0!==item.series.find((function(d){return d.date.toString()===filter.date.toString()}))})).sort((function(a,b){var aPoint=a.series.find((function(d){return d.date.toString()===filter.date.toString()})),bPoint=b.series.find((function(d){return d.date.toString()===filter.date.toString()})),aVal=aPoint?Number(aPoint[filter.criteria]):0,bVal=bPoint?Number(bPoint[filter.criteria]):0;return"desc"===filter.sortingDir?bVal-aVal:aVal-bVal})).slice(0,filter.limit)).map((function(item){return _objectSpread(_objectSpread({},item),{},{series:item.series.filter((function(point){return null!==point.value&&void 0!==point.value}))})}))}),[dataSet,filter,disabledItems]),yScale=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear().domain(yAxisDomain||[d3__WEBPACK_IMPORTED_MODULE_1__.min(filteredDataSet.flatMap((function(_ref2){return _ref2.series.filter((function(dd){return null!==dd.value}))})),(function(d){return d.value}))||0,d3__WEBPACK_IMPORTED_MODULE_1__.max(filteredDataSet.flatMap((function(_ref3){return _ref3.series.filter((function(dd){return null!==dd.value}))})),(function(d){return d.value}))||1]).range([height-margin.bottom,margin.top]).clamp(!0).nice()}),[filteredDataSet,height,margin,yAxisDomain]),xScale=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if("number"===xAxisDataType)return d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear().domain([d3__WEBPACK_IMPORTED_MODULE_1__.min(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return d.date}))})))||0,d3__WEBPACK_IMPORTED_MODULE_1__.max(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return d.date}))})))||1]).range([margin.left,width-margin.right]).clamp(!0).nice();if("date_annual"===xAxisDataType){var _minDate=d3__WEBPACK_IMPORTED_MODULE_1__.min(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return new Date("".concat(d.date,"-01-01"))}))}))),_maxDate=d3__WEBPACK_IMPORTED_MODULE_1__.max(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return new Date("".concat(d.date))}))})));return d3__WEBPACK_IMPORTED_MODULE_1__.scaleTime().domain([_minDate||0,_maxDate||1]).range([margin.left,width-margin.right])}var minDate=d3__WEBPACK_IMPORTED_MODULE_1__.min(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return new Date(d.date)}))}))),maxDate=d3__WEBPACK_IMPORTED_MODULE_1__.max(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return new Date(d.date)}))})));return d3__WEBPACK_IMPORTED_MODULE_1__.scaleTime().domain([minDate||0,maxDate||1]).range([margin.left,width-margin.right])}),[filteredDataSet,width,margin,xAxisDataType]),xTickValues=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if("date_annual"===xAxisDataType){var years=filteredDataSet.flatMap((function(item){return item.series.map((function(d){var year=new Date(d.date).getFullYear();return isNaN(year)?null:year}))})).filter((function(y){return null!==y}));if(0===years.length)return[];for(var minYear=Math.min.apply(Math,_toConsumableArray(years)),maxYear=Math.max.apply(Math,_toConsumableArray(years)),allYears=[],y=minYear;y<=maxYear;y++)allYears.push(new Date("".concat(y,"-01-01")));var maxTicks=Math.floor((width-margin.left-margin.right)/50);if(allYears.length<=maxTicks)return allYears;for(var result=[allYears[0]],step=(allYears.length-1)/4,i=1;i<4;i++){var idx=Math.round(i*step);idx>0&&idx<allYears.length-1&&result.push(allYears[idx])}return result.push(allYears[allYears.length-1]),result.sort((function(a,b){return a.getTime()-b.getTime()})),result}if("date_monthly"===xAxisDataType){var months=filteredDataSet.flatMap((function(item){return item.series.map((function(d){var date=new Date(d.date);return isNaN(date.getTime())?null:date}))})).filter((function(d){return null!==d}));if(0===months.length)return[];for(var minMonth=new Date(Math.min.apply(Math,_toConsumableArray(months.map((function(d){return d.getTime()}))))),maxMonth=new Date(Math.max.apply(Math,_toConsumableArray(months.map((function(d){return d.getTime()}))))),allMonths=[],current=new Date(minMonth.getFullYear(),minMonth.getMonth(),1),end=new Date(maxMonth.getFullYear(),maxMonth.getMonth(),1);current<=end;)allMonths.push(new Date(current)),current.setMonth(current.getMonth()+1);var _maxTicks=Math.floor((width-margin.left-margin.right)/50);if(allMonths.length<=_maxTicks)return allMonths;for(var _result=[allMonths[0]],_step=(allMonths.length-1)/4,_i=1;_i<4;_i++){var _idx=Math.round(_i*_step);_idx>0&&_idx<allMonths.length-1&&_result.push(allMonths[_idx])}return _result.push(allMonths[allMonths.length-1]),_result.sort((function(a,b){return a.getTime()-b.getTime()})),_result}if("number"===xAxisDataType){var values=Array.from(new Set(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return Number(d.date)}))}))));return(values=values.filter((function(v){return"number"==typeof v&&!isNaN(v)}))).sort((function(a,b){return a-b})),values}var dateValues=Array.from(new Set(filteredDataSet.flatMap((function(item){return item.series.map((function(d){return d.date}))})))).map((function(d){return new Date(d)})).filter((function(d){return d instanceof Date&&!isNaN(d.getTime())}));return dateValues.sort((function(a,b){return a.getTime()-b.getTime()})),dateValues}),[filteredDataSet,xAxisDataType,width,margin]),getYValueAtX=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(series,x){if(x instanceof Date){var _dataPoint=series.find((function(d){return new Date(d.date).getTime()===x.getTime()}));return _dataPoint?_dataPoint.value:void 0}var dataPoint=series.find((function(d){return Number(d.date)===x}));return dataPoint?dataPoint.value:void 0}),[]),getPathLengthAtX=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(path,x){var l=path.getTotalLength();if(!path||0===path.getTotalLength())return 0;for(var i=0;i<=90;i++){if(path.getPointAtLength(l*i/90).x>=x)return l*i/90}}),[]),getDashArrayMemoized=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(series,pathNode,xScale){for(var totalLength=pathNode.getTotalLength(),lengths=series.map((function(d){return getPathLengthAtX(pathNode,xScale(new Date(d.date)))})),dashArray=[],i=1;i<=series.length;i++){var _series$i,segmentLength=i===series.length-1?totalLength-lengths[i-1]:lengths[i]-lengths[i-1];if(null!==(_series$i=series[i])&&void 0!==_series$i&&_series$i.certainty)dashArray.length%2==1?(dashArray.push(0),dashArray.push(segmentLength)):dashArray.push(segmentLength);else{for(var dashes=Math.floor(segmentLength/8),remainder=Math.ceil(segmentLength-8*dashes),j=0;j<dashes;j++)dashArray.push(4),dashArray.push(4);remainder>0&&dashArray.push(remainder)}}return dashArray.join(",")}}),[4,4]),line=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(_ref4){var _d3$curve,d=_ref4.d,curve=_ref4.curve;return d3__WEBPACK_IMPORTED_MODULE_1__.line().x((function(d){return xScale("number"===xAxisDataType?Number(d.date):"date_annual"===xAxisDataType?new Date("".concat(d.date,"-01-01")):new Date(d.date))})).y((function(d){return yScale(d.value)})).curve(null!==(_d3$curve=null==d3__WEBPACK_IMPORTED_MODULE_1__?void 0:d3__WEBPACK_IMPORTED_MODULE_1__[curve])&&void 0!==_d3$curve?_d3$curve:d3__WEBPACK_IMPORTED_MODULE_1__.curveBumpX)(d)}),[xScale,yScale,xAxisDataType]),lineData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return dataSet.map((function(set){return{label:set.label,color:set.color,points:set.series}}))}),[dataSet]),prevHighlightItems=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),prevDisabledItems=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),prevColorsMapping=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({});(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){prevHighlightItems.current=highlightItems}),[highlightItems]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){prevDisabledItems.current=disabledItems}),[disabledItems]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){prevColorsMapping.current=colorsMapping}),[colorsMapping]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current);svg.node()&&(0===highlightItems.length?(svg.selectAll(".data-group").transition().duration(300).style("opacity",1),svg.selectAll(".line-overlay").transition().duration(300).style("opacity",.05)):(svg.selectAll(".data-group").transition().duration(300).style("opacity",.05),highlightItems.forEach((function(label){svg.selectAll('[data-label="'.concat(label,'"]:not(.line-overlay)')).transition().duration(300).style("opacity",1)})),svg.selectAll(".line-overlay").transition().duration(300).style("opacity",.05)))}),[highlightItems,svgRef]);var handleItemHighlight=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(labels){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current);svg.node()&&labels.length>0&&svg.selectAll(".data-group").each((function(){var dataLabel=this.getAttribute("data-label");dataLabel&&!labels.includes(dataLabel)?d3__WEBPACK_IMPORTED_MODULE_1__.select(this).transition().duration(200).style("opacity",.05):d3__WEBPACK_IMPORTED_MODULE_1__.select(this).transition().duration(200).style("opacity",1)})),onHighlightItem(labels),clearTimeout(window.hoverResetTimer),window.hoverResetTimer=window.setTimeout((function(){}),1e3)}),[onHighlightItem,svgRef]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(isInitialMount.current){setIsProcessing(!0);var initialTimer=setTimeout((function(){setIsProcessing(!1),isInitialMount.current=!1}),100);return function(){return clearTimeout(initialTimer)}}}),[100]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var processingTimer=setTimeout((function(){}),100);return function(){return clearTimeout(processingTimer)}}),[dataSet,filter,width,height,100]);var showLoadingIndicator=isLoading||isProcessing&&isInitialMount.current,visibleDataSets=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return filteredDataSet.filter((function(d){return d.series.length>1}))}),[filteredDataSet]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current);svg.node()&&svg.selectAll(".data-group:not(.line):not(.line-overlay)").remove()}),[filter,dataSet]);var handleMouseOut=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){event.preventDefault(),event.stopPropagation();var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current);svg.node()&&(svg.selectAll(".data-group").transition().duration(300).style("opacity",1),svg.selectAll(".line-overlay").transition().duration(300).style("opacity",.05)),onHighlightItem([]),null!=tooltipRef&&tooltipRef.current&&(tooltipRef.current.style.visibility="hidden"),setTimeout((function(){}),300)}),[onHighlightItem,svgRef]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){event.preventDefault(),event.stopPropagation(),onHighlightItem([]),null!=tooltipRef&&tooltipRef.current&&(tooltipRef.current.style.visibility="hidden"),setTimeout((function(){}),200)}),[onHighlightItem]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current),keyFn=function keyFn(d){return d.label},linePaths=svg.selectAll(".line").data(visibleDataSets,keyFn);linePaths.exit().remove(),linePaths.attr("d",(function(d){var _d$curve;return line({d:d.series,curve:null!==(_d$curve=null==d?void 0:d.curve)&&void 0!==_d$curve?_d$curve:"curveBumpX"})})).each((function(d){var dashArray=getDashArrayMemoized(d.series,this,xScale);d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("stroke-dasharray",dashArray)})),linePaths.enter().append("path").attr("class",(function(d,i){return"line line-".concat(i," data-group data-group-").concat(i)})).attr("data-label",(function(d){return d.label})).attr("data-label-safe",(function(d){return sanitizeForClassName(d.label)})).attr("d",(function(d){var _d$curve2;return line({d:d.series,curve:null!==(_d$curve2=null==d?void 0:d.curve)&&void 0!==_d$curve2?_d$curve2:"curveBumpX"})})).attr("stroke","transparent").attr("stroke-width",2.5).attr("fill","none").attr("pointer-events","none").attr("transition","stroke 0.5s ease-out, opacity 0.5s ease-out").attr("stroke",(function(d){return getColor(colorsMapping[d.label],d.color)})).attr("opacity",0).each((function(d){var dashArray=getDashArrayMemoized(d.series,this,xScale);d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("stroke-dasharray",dashArray)})).transition().duration(100).ease(TRANSITION_EASE).attr("stroke",(function(d){return getColor(colorsMapping[d.label],d.color)})).attr("fill","none").attr("opacity",1);var lineOverlays=svg.selectAll(".line-overlay").data(visibleDataSets,keyFn);lineOverlays.exit().remove(),lineOverlays.attr("d",(function(d){var _d$curve3;return line({d:d.series,curve:null!==(_d$curve3=null==d?void 0:d.curve)&&void 0!==_d$curve3?_d$curve3:"curveBumpX"})}));var enterOverlays=lineOverlays.enter().append("path").attr("class",(function(d,i){var safeLabelClass=sanitizeForClassName(d.label);return"line-overlay line-overlay-".concat(i," data-group-overlay data-group-").concat(i," data-group-overlay-").concat(safeLabelClass," line-group-overlay-").concat(safeLabelClass)})).attr("data-label",(function(d){return d.label})).attr("data-label-safe",(function(d){return sanitizeForClassName(d.label)})).attr("d",(function(d){var _d$curve4;return line({d:d.series,curve:null!==(_d$curve4=null==d?void 0:d.curve)&&void 0!==_d$curve4?_d$curve4:"curveBumpX"})})).attr("stroke",(function(d){return getColor(colorsMapping[d.label],d.color)})).attr("stroke-width",6).attr("fill","none").attr("pointer-events","stroke").style("opacity",.05);enterOverlays.transition().duration(100).ease(TRANSITION_EASE).attr("stroke",(function(d){return getColor(colorsMapping[d.label],d.color)})).on("end",(function(){d3__WEBPACK_IMPORTED_MODULE_1__.select(this).on("mouseenter",(function(){var label=d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("data-label");if(label){var _svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current);_svg.selectAll(".data-group").style("opacity",.05),_svg.selectAll("circle, rect, path").style("opacity",.05),_svg.selectAll('[data-label="'.concat(label,'"]:not(.line-overlay)')).style("opacity",1),_svg.selectAll('circle[data-label="'.concat(label,'"], rect[data-label="').concat(label,'"], path[data-label="').concat(label,'"]')).style("opacity",1),_svg.selectAll(".line-overlay").style("opacity",.05),handleItemHighlight([label])}})).on("mouseout",handleMouseOut)})),lineOverlays.on("mouseenter",(function(){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current),label=d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("data-label");label&&(svg.selectAll(".data-group").style("opacity",.05),svg.selectAll("circle, rect, path").style("opacity",.05),svg.selectAll('[data-label="'.concat(label,'"]:not(.line-overlay)')).style("opacity",1),svg.selectAll('circle[data-label="'.concat(label,'"], rect[data-label="').concat(label,'"],[data-label="').concat(label,'"]')).style("opacity",1),svg.selectAll(".line-overlay").style("opacity",.05),handleItemHighlight([label]))})).on("mouseout",handleMouseOut),svg.selectAll(".data-group:not(.line):not(.line-overlay)").filter((function(){var dataLabel=this.getAttribute("data-label");return!visibleDataSets.some((function(d){return d.label===dataLabel}))})).remove();for(var _loop=function _loop(){var data=visibleDataSets[i],shape=data.shape||"circle",color=getColor(colorsMapping[data.label],data.color),safeLabelClass=sanitizeForClassName(data.label),pointKeyFn=function pointKeyFn(d){return"".concat(data.label,"-").concat(d.date)};if("circle"===shape){var circles=svg.selectAll(".data-point-".concat(i,'[data-label="').concat(data.label,'"]')).data(data.series,pointKeyFn);circles.exit().remove(),circles.attr("cx",(function(d){return xScale(new Date(d.date))})).attr("cy",(function(d){return yScale(d.value)})).attr("fill",color),circles.enter().append("circle").attr("class","data-group data-point data-group-".concat(i," data-group-").concat(safeLabelClass," data-point-").concat(i)).attr("data-label",data.label).attr("data-label-safe",safeLabelClass).attr("cx",(function(d){return xScale(new Date(d.date))})).attr("cy",(function(d){return yScale(d.value)})).attr("r",5).attr("fill",color).attr("stroke","#fdfdfd").attr("stroke-width",2).attr("cursor","crosshair").style("opacity",0).transition().duration(100).ease(TRANSITION_EASE).style("opacity",1)}else if("square"===shape){var squares=svg.selectAll(".data-point-".concat(i,'[data-label="').concat(data.label,'"]')).data(data.series,pointKeyFn);squares.exit().remove(),squares.attr("x",(function(d){return xScale(new Date(d.date))-6})).attr("y",(function(d){return yScale(d.value)-6})).attr("fill",color),squares.enter().append("rect").attr("class","data-group data-point data-group-".concat(i," data-group-").concat(safeLabelClass," data-point-").concat(i)).attr("data-label",data.label).attr("data-label-safe",safeLabelClass).attr("x",(function(d){return xScale(new Date(d.date))-6})).attr("y",(function(d){return yScale(d.value)-6})).attr("width",12).attr("height",12).attr("fill",color).attr("stroke","#fdfdfd").attr("stroke-width",2).attr("cursor","crosshair").style("opacity",0).transition().duration(100).ease(TRANSITION_EASE).style("opacity",1)}else if("triangle"===shape){var triangles=svg.selectAll(".data-point-".concat(i,'[data-label="').concat(data.label,'"]')).data(data.series,pointKeyFn);triangles.exit().remove();var generateTrianglePath=function generateTrianglePath(x,y){var size=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,height=size*Math.sqrt(3)/2;return"M ".concat(x," ").concat(y-.7*height," L ").concat(x+size/2," ").concat(y+.3*height," L ").concat(x-size/2," ").concat(y+.3*height," Z")};triangles.attr("d",(function(d){var x=xScale(new Date(d.date)),y=yScale(d.value);return generateTrianglePath(x,y)})).attr("fill",color),triangles.enter().append("path").attr("class","data-group data-point data-group-".concat(i," data-group-").concat(safeLabelClass," data-point-").concat(i)).attr("data-label",data.label).attr("data-label-safe",safeLabelClass).attr("d",(function(d){var x=xScale(new Date(d.date)),y=yScale(d.value);return generateTrianglePath(x,y,0)})).attr("fill",color).attr("stroke","#fdfdfd").attr("stroke-width",2).attr("cursor","crosshair").style("opacity",0).transition().duration(100).ease(TRANSITION_EASE).attr("d",(function(d){var x=xScale(new Date(d.date)),y=yScale(d.value);return generateTrianglePath(x,y)})).style("opacity",1)}svg.selectAll(".data-point-".concat(i,'[data-label="').concat(data.label,'"]')).on("mouseenter",(function(event,d){event.preventDefault(),event.stopPropagation(),handleItemHighlight([data.label]);var tooltipContent=tooltipFormatter(_objectSpread(_objectSpread({},d),{},{label:data.label}),data.series,filteredDataSet);if(null!=tooltipRef&&tooltipRef.current&&svgRef.current){var _d3$pointer2=_slicedToArray(d3__WEBPACK_IMPORTED_MODULE_1__.pointer(event,event.currentTarget),2),mouseX=_d3$pointer2[0],mouseY=_d3$pointer2[1],svgRect=svgRef.current.getBoundingClientRect(),tooltip=tooltipRef.current;tooltip.style.visibility="visible",tooltip.innerHTML=tooltipContent;var tooltipRect=tooltip.getBoundingClientRect(),xPosition=mouseX+10,yPosition=mouseY-25;xPosition+tooltipRect.width>svgRect.width-margin.right?tooltip.style.left="".concat(mouseX-tooltipRect.width-10,"px"):tooltip.style.left="".concat(xPosition,"px"),yPosition<margin.top?tooltip.style.top="".concat(mouseY+10,"px"):tooltip.style.top="".concat(yPosition,"px")}})).on("mouseout",(function(event){event.preventDefault(),event.stopPropagation();var relatedTarget=event.relatedTarget;relatedTarget&&(relatedTarget.classList.contains("line")||relatedTarget.classList.contains("line-overlay"))||(handleItemHighlight([]),null!=tooltipRef&&tooltipRef.current&&(tooltipRef.current.style.visibility="hidden"))}))},i=0;i<visibleDataSets.length;i++)_loop()}),[filteredDataSet,visibleDataSets,width,height,margin,xAxisDataType,getDashArrayMemoized,colorsMapping,line,xScale,yScale,handleItemHighlight,handleMouseOut,tooltipFormatter,tooltipRef,svgRef,getColor,sanitizeForClassName,100,TRANSITION_EASE]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){for(var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current),_i2=0,_Object$keys=Object.keys(colorsMapping);_i2<_Object$keys.length;_i2++){var _key=_Object$keys[_i2];svg.selectAll('circle[data-label="'.concat(_key,'"], rect[data-label="').concat(_key,'"], path.data-point[data-label="').concat(_key,'"]')).transition().duration(400).ease(d3__WEBPACK_IMPORTED_MODULE_1__.easeQuadOut).attr("fill",getColor(colorsMapping[_key],null)),svg.selectAll('.line[data-label="'.concat(_key,'"]')).transition().duration(400).ease(d3__WEBPACK_IMPORTED_MODULE_1__.easeQuadOut).attr("stroke",getColor(colorsMapping[_key],null)).attr("stroke-width",2.5),svg.selectAll('.line-overlay[data-label="'.concat(_key,'"]')).transition().duration(400).ease(d3__WEBPACK_IMPORTED_MODULE_1__.easeQuadOut).attr("stroke",getColor(colorsMapping[_key],null))}}),[colorsMapping,getColor]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current).selectAll(".data-group").each((function(){var dataLabel=d3__WEBPACK_IMPORTED_MODULE_1__.select(this).attr("data-label"),opacity=disabledItems.includes(dataLabel)?.05:1;d3__WEBPACK_IMPORTED_MODULE_1__.select(this).transition().duration(100).style("opacity",opacity)})),0===highlightItems.length&&d3__WEBPACK_IMPORTED_MODULE_1__.select("#tooltip").style("visibility","hidden")}),[highlightItems]);var handleHover=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){if(svgRef.current&&tooltipRef.current){var _d3$pointer4=_slicedToArray(d3__WEBPACK_IMPORTED_MODULE_1__.pointer(event,event.currentTarget),2),x=_d3$pointer4[0],y=_d3$pointer4[1],xValue=xScale.invert(x),tooltipTitle='<div class="tooltip-title">'.concat(xValue,"</div>"),tooltipContent=filteredDataSet.map((function(data){var yValue=getYValueAtX(data.series,xValue);return"<div>".concat(data.label,": ").concat(null!=yValue?yValue:"N/A","</div>")})).join(""),tooltip=tooltipRef.current;tooltip.innerHTML='<div style="background: #fff; padding: 5px">'.concat(tooltipTitle).concat(tooltipContent,"</div>"),tooltip.style.opacity="1",tooltip.style.visibility="visible",tooltip.style.pointerEvents="auto";var tooltipRect=tooltip.getBoundingClientRect(),svgRect=svgRef.current.getBoundingClientRect();x+tooltipRect.width>svgRect.width-margin.right?tooltip.style.left=x-tooltipRect.width-10+"px":tooltip.style.left=x+10+"px",y-tooltipRect.height<margin.top?tooltip.style.top=y+10+"px":tooltip.style.top=y-tooltipRect.height-5+"px";var hoverLinesGroup=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current).select(".hover-lines"),hoverLine=hoverLinesGroup.select(".hover-line"),xPosition=xScale(xValue);hoverLine.attr("x1",xPosition).attr("x2",xPosition).attr("y1",MARGIN.top).attr("y2",HEIGHT-MARGIN.bottom+20).style("display","block"),hoverLinesGroup.style("display","block")}}),[xScale,filteredDataSet,getYValueAtX,margin]),handleCombinedMouseOut=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){if(tooltipRef.current&&svgRef.current){var tooltip=tooltipRef.current;tooltip.style.visibility="hidden",tooltip.style.opacity="0",tooltip.innerHTML="";var hoverLinesGroup=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current).select(".hover-lines"),hoverLine=hoverLinesGroup.select(".hover-line");hoverLinesGroup.style("display","none"),hoverLine.style("display","none")}}),[]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){if(showCombined&&svgRef.current){var svg=d3__WEBPACK_IMPORTED_MODULE_1__.select(svgRef.current),hoverLinesGroup=svg.append("g").attr("class","hover-lines").style("display","none");hoverLinesGroup.append("line").attr("class","hover-line").attr("stroke","lightgray").attr("stroke-width",1).style("pointer-events","none").style("display","none");var overlay=svg.append("rect").attr("class","overlay").attr("width",width).attr("height",height).style("fill","none").style("pointer-events","all");return overlay.on("mousemove",handleHover),overlay.on("mouseout",handleCombinedMouseOut),function(){overlay.on("mousemove",null),overlay.on("mouseout",null),hoverLinesGroup.remove(),overlay.remove()}}}),[showCombined,width,height,handleHover,handleCombinedMouseOut]);var displayIsNodata=(0,_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__.x)({dataSet,isLoading,isNodataComponent,isNodata});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){renderCompleteRef.current=!0}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){if(renderCompleteRef.current&&onChartDataProcessed){var allDates=dataSet.flatMap((function(set){return set.series.map((function(point){return"number"===xAxisDataType?point.date:String(point.date)}))})),uniqueDates=_toConsumableArray(new Set(allDates)),visibleSeries=dataSet.map((function(d){return d.label}));null!=filter&&filter.date&&(visibleSeries=visibleSeries.sort((function(a,b){var _aData$series$find,_bData$series$find,aData=dataSet.find((function(d){return d.label===a})),bData=dataSet.find((function(d){return d.label===b})),aValue=(null==aData||null===(_aData$series$find=aData.series.find((function(d){return String(d.date)===String(filter.date)})))||void 0===_aData$series$find?void 0:_aData$series$find.value)||0,bValue=(null==bData||null===(_bData$series$find=bData.series.find((function(d){return String(d.date)===String(filter.date)})))||void 0===_bData$series$find?void 0:_bData$series$find.value)||0;return"desc"===filter.sortingDir?bValue-aValue:aValue-bValue})),filter.limit&&(visibleSeries=visibleSeries.slice(0,filter.limit)));var currentMetadata={xAxisDomain:uniqueDates.map(String),yAxisDomain:yScale.domain(),visibleItems:visibleSeries.filter((function(label){var _dataSet$find;return!disabledItems.includes(label)&&(null===(_dataSet$find=dataSet.find((function(d){return d.label===label})))||void 0===_dataSet$find?void 0:_dataSet$find.series.length)>0})),renderedData:lineData.reduce((function(acc,item){return item.points.length>0&&visibleSeries.includes(item.label)&&(acc[item.label]=item.points),acc}),{}),chartType:"line-chart"},hasChanged=!prevChartDataRef.current||JSON.stringify(prevChartDataRef.current.xAxisDomain)!==JSON.stringify(currentMetadata.xAxisDomain)||JSON.stringify(prevChartDataRef.current.yAxisDomain)!==JSON.stringify(currentMetadata.yAxisDomain)||JSON.stringify(prevChartDataRef.current.visibleItems)!==JSON.stringify(currentMetadata.visibleItems)||JSON.stringify(Object.keys(prevChartDataRef.current.renderedData).sort())!==JSON.stringify(Object.keys(currentMetadata.renderedData).sort());prevChartDataRef.current=currentMetadata,hasChanged&&onChartDataProcessed(currentMetadata)}}),[dataSet,xAxisDataType,yScale,disabledItems,lineData,filter,onChartDataProcessed]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(LineChartContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:svgRef,width,height},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_Title__WEBPACK_IMPORTED_MODULE_2__.A,{x:width/2,y:margin.top/2},title),filteredDataSet.length>0&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_4__.A,{xScale,height,margin,xAxisFormat,xAxisDataType,ticks,tickValues:xTickValues}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_YaxisLinear__WEBPACK_IMPORTED_MODULE_3__.A,{yScale,width,height,margin,highlightZeroLine:!0,yAxisFormat}))),showLoadingIndicator&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}},isLoadingComponent||react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__.A,null)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:tooltipRef,className:"tooltip",style:{position:"absolute",visibility:"hidden",transition:"visibility 0.1s ease-out, opacity 0.1s ease-out",willChange:"visibility, opacity, top, left",zIndex:1e3,pointerEvents:"none",padding:"5px",borderRadius:"4px",whiteSpace:"nowrap"}}),displayIsNodata&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,isNodataComponent))};const __WEBPACK_DEFAULT_EXPORT__=LineChart;LineChart.__docgenInfo={description:"",methods:[],displayName:"LineChart",props:{dataSet:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  label: string;\n  color: string;\n  shape?: "circle" | "square" | "triangle";\n  curve?: "curveBumpX" | "curveLinear";\n  series: DataPoint[];\n}',signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"shape",value:{name:"union",raw:'"circle" | "square" | "triangle"',elements:[{name:"literal",value:'"circle"'},{name:"literal",value:'"square"'},{name:"literal",value:'"triangle"'}],required:!1}},{key:"curve",value:{name:"union",raw:'"curveBumpX" | "curveLinear"',elements:[{name:"literal",value:'"curveBumpX"'},{name:"literal",value:'"curveLinear"'}],required:!1}},{key:"series",value:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]",required:!0}}]}}],raw:'{\n  label: string;\n  color: string;\n  shape?: "circle" | "square" | "triangle";\n  curve?: "curveBumpX" | "curveLinear";\n  series: DataPoint[];\n}[]'},description:""},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"900 - MARGIN.left - MARGIN.right",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"480 - MARGIN.top - MARGIN.bottom",computed:!1}},margin:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ top: 50, right: 50, bottom: 50, left: 50 }",computed:!1}},title:{required:!1,tsType:{name:"string"},description:""},yAxisDomain:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:""},yAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}}},description:""},xAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}}},description:""},xAxisDataType:{required:!1,tsType:{name:"union",raw:'"number" | "date_annual" | "date_monthly"',elements:[{name:"literal",value:'"number"'},{name:"literal",value:'"date_annual"'},{name:"literal",value:'"date_monthly"'}]},description:"",defaultValue:{value:'"number"',computed:!1}},tooltipFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:'(\n  d: DataPoint,\n  series: DataPoint[],\n  dataSet: {\n    label: string;\n    color: string;\n    shape?: "circle" | "square" | "triangle";\n    series: DataPoint[];\n  }[]\n) => string',signature:{arguments:[{type:{name:"DataPoint"},name:"d"},{type:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]"},name:"series"},{type:{name:"Array",elements:[{name:"signature",type:"object",raw:'{\n  label: string;\n  color: string;\n  shape?: "circle" | "square" | "triangle";\n  series: DataPoint[];\n}',signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"color",value:{name:"string",required:!0}},{key:"shape",value:{name:"union",raw:'"circle" | "square" | "triangle"',elements:[{name:"literal",value:'"circle"'},{name:"literal",value:'"square"'},{name:"literal",value:'"triangle"'}],required:!1}},{key:"series",value:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]",required:!0}}]}}],raw:'{\n  label: string;\n  color: string;\n  shape?: "circle" | "square" | "triangle";\n  series: DataPoint[];\n}[]'},name:"dataSet"}],return:{name:"string"}}},description:"",defaultValue:{value:"(d: DataPoint) => `<div>${d.label} - ${d.date}: ${d.value}</div>`",computed:!1}},showCombined:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isLoadingComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodataComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodata:{required:!1,tsType:{name:"union",raw:"| boolean\n| ((\n    dataSet: {\n      label: string;\n      color: string;\n      series: DataPoint[];\n    }[]\n  ) => boolean)",elements:[{name:"boolean"},{name:"unknown"}]},description:""},filter:{required:!1,tsType:{name:"signature",type:"object",raw:'{\n  limit: number;\n  date: number | string;\n  criteria: string;\n  sortingDir: "asc" | "desc";\n}',signature:{properties:[{key:"limit",value:{name:"number",required:!0}},{key:"date",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"criteria",value:{name:"string",required:!0}},{key:"sortingDir",value:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}],required:!0}}]}},description:""},onChartDataProcessed:{required:!1,tsType:{name:"signature",type:"function",raw:"(metadata: ChartMetadata) => void",signature:{arguments:[{type:{name:"ChartMetadata"},name:"metadata"}],return:{name:"void"}}},description:""},onHighlightItem:{required:!0,tsType:{name:"signature",type:"function",raw:"(labels: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"labels"}],return:{name:"void"}}},description:""},ticks:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}}},"./src/components/shared/YaxisLinear.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3/src/index.js"),YaxisLinear=function YaxisLinear(_ref){var yScale=_ref.yScale,width=_ref.width,height=_ref.height,_ref$highlightZeroLin=_ref.highlightZeroLine,highlightZeroLine=void 0===_ref$highlightZeroLin||_ref$highlightZeroLin,margin=_ref.margin,yTicksQty=_ref.yTicksQty,yAxisFormat=_ref.yAxisFormat,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),yAxisConfig=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var axis=d3__WEBPACK_IMPORTED_MODULE_1__.axisLeft(yScale).tickSize(0).tickPadding(10).ticks(yTicksQty||10);return yAxisFormat&&axis.tickFormat(yAxisFormat),axis}),[yScale,yTicksQty,yAxisFormat]),prevYScaleDomain=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(yScale.domain());return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){var g=d3__WEBPACK_IMPORTED_MODULE_1__.select(ref.current),currentYScaleDomain=yScale.domain(),yScaleChanged=JSON.stringify(currentYScaleDomain)!==JSON.stringify(prevYScaleDomain.current);prevYScaleDomain.current=currentYScaleDomain,g.transition().duration(750).attr("transform","translate(".concat(margin.left>0?margin.left:0,",0)")).call(yAxisConfig).call((function(g){return g.select(".domain").attr("stroke-opacity",0)})).call((function(g){return g.select(".domain").remove()})).call((function(g){return g.selectAll(".tick line").attr("stroke-opacity",0)})).call((function(g){return g.selectAll(".tick line").remove()})).call((function(g){return g.selectAll(".tick-line").remove()})),g.selectAll(".tick line").remove(),g.selectAll(".tick text").transition().duration(750).style("opacity",1);var tickLines=g.selectAll(".tick").append("line").attr("class","tick-line").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).style("stroke-dasharray","2,2").style("stroke","lightgray").style("opacity",1);yScaleChanged?tickLines.transition().duration(750).attr("x2",width-margin.right-margin.left).each((function(d){0===d&&d3__WEBPACK_IMPORTED_MODULE_1__.select(this).classed("zero-line",!0).attr("stroke",highlightZeroLine?"#000":"lightgray").attr("stroke-width","1")})):tickLines.attr("x2",width-margin.right-margin.left).each((function(d){0===d&&d3__WEBPACK_IMPORTED_MODULE_1__.select(this).classed("zero-line",!0).attr("stroke",highlightZeroLine?"#000":"lightgray").attr("stroke-width","1")}))}),[yScale,width,height,margin,highlightZeroLine,yAxisConfig]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{ref})};const __WEBPACK_DEFAULT_EXPORT__=react__WEBPACK_IMPORTED_MODULE_0__.memo(YaxisLinear);YaxisLinear.__docgenInfo={description:"",methods:[],displayName:"YaxisLinear",props:{yScale:{required:!0,tsType:{name:"ScaleLinear",elements:[{name:"number"},{name:"number"}],raw:"ScaleLinear<number, number>"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},highlightZeroLine:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},margin:{required:!0,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:""},yAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}}},description:""},yTicksQty:{required:!1,tsType:{name:"number"},description:""}}}}}]);