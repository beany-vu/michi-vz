"use strict";(self.webpackChunkmichi_vz=self.webpackChunkmichi_vz||[]).push([[562],{"./src/components/AreaChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _templateObject,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3/src/index.js"),_shared_Title__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/shared/Title.tsx"),_shared_YaxisLinear__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/shared/YaxisLinear.tsx"),_MichiVzProvider__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/MichiVzProvider.tsx"),_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/shared/XaxisLinear.tsx"),_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/shared/LoadingIndicator.tsx"),_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/hooks/useDisplayIsNodata.ts"),use_deep_compare_effect__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/use-deep-compare-effect/dist/use-deep-compare-effect.esm.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var AreaChartContainer=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").Ay.div(_templateObject||(_templateObject=function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  position: relative;\n  contain: layout paint;\n  content-visibility: auto;\n  path {\n    transition: fill 0.1s ease-out;\n    will-change: fill;\n    transition-behavior: allow-discrete;\n  }\n"]))),MARGIN={top:50,right:50,bottom:50,left:50},AreaChart=function AreaChart(_ref){var series=_ref.series,_ref$width=_ref.width,width=void 0===_ref$width?900:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?480:_ref$height,_ref$margin=_ref.margin,margin=void 0===_ref$margin?MARGIN:_ref$margin,title=_ref.title,keys=_ref.keys,xAxisFormat=_ref.xAxisFormat,yAxisFormat=_ref.yAxisFormat,_ref$yAxisDomain=_ref.yAxisDomain,yAxisDomain=void 0===_ref$yAxisDomain?null:_ref$yAxisDomain,_ref$tooltipFormatter=_ref.tooltipFormatter,tooltipFormatter=void 0===_ref$tooltipFormatter?null:_ref$tooltipFormatter,_ref$xAxisDataType=_ref.xAxisDataType,xAxisDataType=void 0===_ref$xAxisDataType?"number":_ref$xAxisDataType,children=_ref.children,_ref$isLoading=_ref.isLoading,isLoading=void 0!==_ref$isLoading&&_ref$isLoading,isLoadingComponent=_ref.isLoadingComponent,isNodataComponent=_ref.isNodataComponent,isNodata=_ref.isNodata,onChartDataProcessed=_ref.onChartDataProcessed,onHighlightItem=_ref.onHighlightItem,filter=_ref.filter,_ref$ticks=_ref.ticks,ticks=void 0===_ref$ticks?5:_ref$ticks,_useChartContext=(0,_MichiVzProvider__WEBPACK_IMPORTED_MODULE_4__.N)(),colorsMapping=_useChartContext.colorsMapping,highlightItems=_useChartContext.highlightItems,disabledItems=_useChartContext.disabledItems,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),hoveredDate=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),1)[0],renderCompleteRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),prevChartDataRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),xScale=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){if("number"===xAxisDataType)return d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear().domain([d3__WEBPACK_IMPORTED_MODULE_1__.min(series,(function(d){return d.date||0})),d3__WEBPACK_IMPORTED_MODULE_1__.max(series,(function(d){return d.date||1}))]).range([margin.left,width-margin.right]).clamp(!0).nice();var minDate=d3__WEBPACK_IMPORTED_MODULE_1__.min(series.map((function(d){return new Date("date_annual"===xAxisDataType?"".concat(d.date," 01 01"):d.date)}))),maxDate=d3__WEBPACK_IMPORTED_MODULE_1__.max(series.map((function(d){return new Date(d.date)})));return d3__WEBPACK_IMPORTED_MODULE_1__.scaleTime().domain([minDate||0,maxDate||1]).range([MARGIN.left,width-margin.right])}),[series,width,height,disabledItems,xAxisDataType]),yScaleDomain=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return yAxisDomain||[0,d3__WEBPACK_IMPORTED_MODULE_1__.max(series,(function(d){return d3__WEBPACK_IMPORTED_MODULE_1__.sum(Object.keys(d).filter((function(key){return!disabledItems.includes(key)})).map((function(key){return"date"===key?0:d[key]||0})))||0}))]}),[series,keys]),yScale=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return d3__WEBPACK_IMPORTED_MODULE_1__.scaleLinear().domain(yScaleDomain).range([height-margin.bottom,margin.top]).clamp(!0).nice()}),[series,width,height,margin]),stackedData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return d3__WEBPACK_IMPORTED_MODULE_1__.stack().keys(keys)(series)}),[series,keys]),areaGenerator=d3__WEBPACK_IMPORTED_MODULE_1__.area().defined((function(){return!0})).x((function(d){return xScale("number"===xAxisDataType?d.data.date:new Date(d.data.date).getTime())})).y0((function(d){return yScale(d[0]||0)})).y1((function(d){return yScale(d[1]||0)})).curve(d3__WEBPACK_IMPORTED_MODULE_1__.curveMonotoneX),displayIsNodata=(0,_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__.x)({dataSet:series,isLoading,isNodataComponent,isNodata});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){renderCompleteRef.current=!0}),[]),(0,use_deep_compare_effect__WEBPACK_IMPORTED_MODULE_8__.Ay)((function(){if(renderCompleteRef.current&&onChartDataProcessed){var domain;domain="number"===xAxisDataType?[d3__WEBPACK_IMPORTED_MODULE_1__.min(series,(function(d){return d.date||0})),d3__WEBPACK_IMPORTED_MODULE_1__.max(series,(function(d){return d.date||1}))]:_toConsumableArray(new Set(series.map((function(d){return d.date}))));var safeYDomain=Array.isArray(yScaleDomain)&&2===yScaleDomain.length?yScaleDomain:[0,yScaleDomain[1]||0],sortedKeys=keys;null!=filter&&filter.date&&(sortedKeys=_toConsumableArray(keys).sort((function(a,b){var _series$find,_series$find2,aValue=(null===(_series$find=series.find((function(d){return String(d.date)===String(filter.date)})))||void 0===_series$find?void 0:_series$find[a])||0,bValue=(null===(_series$find2=series.find((function(d){return String(d.date)===String(filter.date)})))||void 0===_series$find2?void 0:_series$find2[b])||0;return"desc"===filter.sortingDir?bValue-aValue:aValue-bValue})));var currentMetadata={xAxisDomain:domain.map(String),yAxisDomain:safeYDomain,visibleItems:sortedKeys.filter((function(key){return!disabledItems.includes(key)})),renderedData:_defineProperty({},keys[0],series),chartType:"area-chart"},hasChanged=!prevChartDataRef.current||JSON.stringify(prevChartDataRef.current.xAxisDomain)!==JSON.stringify(currentMetadata.xAxisDomain)||JSON.stringify(prevChartDataRef.current.yAxisDomain)!==JSON.stringify(currentMetadata.yAxisDomain)||JSON.stringify(prevChartDataRef.current.visibleItems)!==JSON.stringify(currentMetadata.visibleItems)||JSON.stringify(Object.keys(prevChartDataRef.current.renderedData).sort())!==JSON.stringify(Object.keys(currentMetadata.renderedData).sort());prevChartDataRef.current=currentMetadata,hasChanged&&onChartDataProcessed(currentMetadata)}}),[series,xAxisDataType,yScaleDomain,keys,disabledItems,filter,onChartDataProcessed]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(AreaChartContainer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tooltip",style:{position:"absolute",background:"white",padding:"5px",pointerEvents:"none",zIndex:1e3,visibility:"hidden"}}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{className:"chart",ref,width,height,style:{overflow:"visible"},onMouseOut:function onMouseOut(event){var target=event.relatedTarget;target&&target.closest("svg.chart")||(d3__WEBPACK_IMPORTED_MODULE_1__.select(".tooltip").style("visibility","hidden"),null==onHighlightItem||onHighlightItem([]))}},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_Title__WEBPACK_IMPORTED_MODULE_2__.A,{x:width/2,y:MARGIN.top/2},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_5__.A,{xScale,height,margin,xAxisFormat,xAxisDataType,ticks}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_YaxisLinear__WEBPACK_IMPORTED_MODULE_3__.A,{yScale,width,height,margin,highlightZeroLine:!0,yAxisFormat}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",null,function prepareAreaData(){return stackedData.map((function(keyData,index){return{key:keys[index],values:keyData,fill:colorsMapping[keys[index]]}}))}().map((function(areaData){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:areaData.key},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:areaGenerator(areaData.values),fill:areaData.fill?areaData.fill:"#fdfdfd",stroke:"#fff",strokeWidth:1,opacity:0===highlightItems.length||highlightItems.includes(areaData.key)?1:.2,onMouseMove:function onMouseMove(event){event.stopPropagation(),onHighlightItem([areaData.key])},onMouseOut:function onMouseOut(event){var target=event.relatedTarget;target&&target.classList.contains("rect-hover")||(event.stopPropagation(),onHighlightItem([]))}}),areaData.values.map((function(dataPoint){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{key:"".concat(areaData.key,"-").concat(dataPoint.data.date),className:"rect-hover",x:xScale("number"===xAxisDataType?dataPoint.data.date:new Date(dataPoint.data.date))-2,y:yScale(dataPoint[1]||0),width:8,strokeWidth:1,rx:3,ry:3,stroke:"#ccc",height:yScale(dataPoint[0]||0)-yScale(dataPoint[1]||0),fill:"#fff",opacity:highlightItems.includes(areaData.key)?.5:0,onMouseEnter:function onMouseEnter(event){event.stopPropagation(),onHighlightItem([areaData.key]),d3__WEBPACK_IMPORTED_MODULE_1__.select(".tooltip").style("visibility","visible").html(function handleAreaSegmentHover(dataPoint,key){var _dataPoint$key;return tooltipFormatter?tooltipFormatter(dataPoint,series,key):'\n        <div style="background: #fff; padding: 5px">\n            <p>'.concat(dataPoint.date,'</p>\n            <p style="color:').concat(colorsMapping[key],'">').concat(key,": ").concat(null!==(_dataPoint$key=dataPoint[key])&&void 0!==_dataPoint$key?_dataPoint$key:"N/A","</p>\n        </div>")}(dataPoint.data,areaData.key));var _d3$pointer2=_slicedToArray(d3__WEBPACK_IMPORTED_MODULE_1__.pointer(event),2),x=_d3$pointer2[0],y=_d3$pointer2[1],tooltip=d3__WEBPACK_IMPORTED_MODULE_1__.select(".tooltip").node(),tooltipWidth=tooltip.getBoundingClientRect().width,tooltipHeight=tooltip.getBoundingClientRect().height;d3__WEBPACK_IMPORTED_MODULE_1__.select(".tooltip").style("left",x-tooltipWidth/2+"px").style("top",y-tooltipHeight-10+"px")},onMouseOut:function onMouseOut(event){var target=event.relatedTarget;target&&(target.classList.contains("rect-hover")||"path"===target.tagName.toLowerCase())||(event.stopPropagation(),onHighlightItem([]),d3__WEBPACK_IMPORTED_MODULE_1__.select(".tooltip").style("visibility","hidden"))}})})),null!==hoveredDate&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("line",{className:"hover-line",x1:xScale(hoveredDate),x2:xScale(hoveredDate),y1:margin.top,y2:height-margin.bottom,stroke:"#666",strokeWidth:1}))})))),isLoading&&isLoadingComponent&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,isLoadingComponent),isLoading&&!isLoadingComponent&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_6__.A,null),displayIsNodata&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,isNodataComponent))};const __WEBPACK_DEFAULT_EXPORT__=AreaChart;AreaChart.__docgenInfo={description:"",methods:[],displayName:"AreaChart",props:{series:{required:!0,tsType:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]"},description:""},keys:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"900",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"480",computed:!1}},margin:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ top: 50, right: 50, bottom: 50, left: 50 }",computed:!1}},title:{required:!1,tsType:{name:"string"},description:""},xAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}}},description:""},yAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number) => string",signature:{arguments:[{type:{name:"number"},name:"d"}],return:{name:"string"}}},description:""},yAxisDomain:{required:!1,tsType:{name:"union",raw:"[number, number] | null",elements:[{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},{name:"null"}]},description:"",defaultValue:{value:"null",computed:!1}},tooltipFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: DataPoint, series: DataPoint[], key: string) => string | null",signature:{arguments:[{type:{name:"DataPoint"},name:"d"},{type:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]"},name:"series"},{type:{name:"string"},name:"key"}],return:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]}}},description:"",defaultValue:{value:"null",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},xAxisDataType:{required:!1,tsType:{name:"union",raw:'"number" | "date_annual" | "date_monthly"',elements:[{name:"literal",value:'"number"'},{name:"literal",value:'"date_annual"'},{name:"literal",value:'"date_monthly"'}]},description:"",defaultValue:{value:'"number"',computed:!1}},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isLoadingComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodataComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodata:{required:!1,tsType:{name:"union",raw:"boolean | ((dataSet: DataPoint[]) => boolean)",elements:[{name:"boolean"},{name:"unknown"}]},description:""},onChartDataProcessed:{required:!1,tsType:{name:"signature",type:"function",raw:"(metadata: ChartMetadata) => void",signature:{arguments:[{type:{name:"ChartMetadata"},name:"metadata"}],return:{name:"void"}}},description:""},onHighlightItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(labels: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"labels"}],return:{name:"void"}}},description:""},filter:{required:!1,tsType:{name:"signature",type:"object",raw:'{ date: number; sortingDir: "asc" | "desc" }',signature:{properties:[{key:"date",value:{name:"number",required:!0}},{key:"sortingDir",value:{name:"union",raw:'"asc" | "desc"',elements:[{name:"literal",value:'"asc"'},{name:"literal",value:'"desc"'}],required:!0}}]}},description:""},ticks:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}}}}},"./src/components/BarBellChart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_shared_Title__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/shared/Title.tsx"),_hooks_useDefaultConfig__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/hooks/useDefaultConfig.ts"),d3__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/d3/src/index.js"),_shared_YaxisBand__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/shared/YaxisBand.tsx"),_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/shared/XaxisLinear.tsx"),_MichiVzProvider__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/MichiVzProvider.tsx"),_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/hooks/useDisplayIsNodata.ts"),_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/shared/LoadingIndicator.tsx");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||_unsupportedIterableToArray(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var BarBellChart=function BarBellChart(_ref){var _ref$dataSet=_ref.dataSet,dataSet=void 0===_ref$dataSet?[]:_ref$dataSet,_ref$keys=_ref.keys,keys=void 0===_ref$keys?[]:_ref$keys,_ref$width=_ref.width,width=void 0===_ref$width?_hooks_useDefaultConfig__WEBPACK_IMPORTED_MODULE_2__.A.WIDTH:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?_hooks_useDefaultConfig__WEBPACK_IMPORTED_MODULE_2__.A.HEIGHT:_ref$height,_ref$margin=_ref.margin,margin=void 0===_ref$margin?_hooks_useDefaultConfig__WEBPACK_IMPORTED_MODULE_2__.A.MARGIN:_ref$margin,title=_ref.title,children=_ref.children,isLoading=_ref.isLoading,isLoadingComponent=_ref.isLoadingComponent,isNodataComponent=_ref.isNodataComponent,isNodata=_ref.isNodata,xAxisDataType=_ref.xAxisDataType,yAxisFormat=_ref.yAxisFormat,xAxisFormat=_ref.xAxisFormat,_ref$tooltipFormat=_ref.tooltipFormat,tooltipFormat=void 0===_ref$tooltipFormat?null:_ref$tooltipFormat,_ref$showGrid=_ref.showGrid,showGrid=void 0===_ref$showGrid?_hooks_useDefaultConfig__WEBPACK_IMPORTED_MODULE_2__.A.SHOW_GRID:_ref$showGrid,onChartDataProcessed=_ref.onChartDataProcessed,onHighlightItem=_ref.onHighlightItem,filter=_ref.filter,_useChartContext=(0,_MichiVzProvider__WEBPACK_IMPORTED_MODULE_6__.N)(),colorsMapping=_useChartContext.colorsMapping,highlightItems=_useChartContext.highlightItems,disabledItems=_useChartContext.disabledItems,ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),refTooltip=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),renderCompleteRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),prevChartDataRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((function(){renderCompleteRef.current=!0}),[]);var generateTooltip=function generateTooltip(d,currentKey,currentValue,event){event.preventDefault(),event.stopPropagation();var content,_d3$pointer2=_slicedToArray(d3__WEBPACK_IMPORTED_MODULE_3__.pointer(event,ref.current),2),x=_d3$pointer2[0],y=_d3$pointer2[1];content=tooltipFormat?tooltipFormat(d,currentKey,currentValue):"".concat(null==d?void 0:d.date,": ").concat(currentKey," - ").concat(currentValue);var tooltip=refTooltip.current;tooltip&&(tooltip.style.top="".concat(y,"px"),tooltip.style.left="".concat(x,"px"),tooltip.style.opacity="1",tooltip.style.visibility="visible",tooltip.innerHTML=content)},hideTooltip=function hideTooltip(){var tooltip=refTooltip.current;tooltip&&(tooltip.style.opacity="0",tooltip.style.visibility="hidden")},yValues=dataSet.map((function(d){return d.date})).map((function(date){return date})),yScale=(0,d3__WEBPACK_IMPORTED_MODULE_3__.scaleBand)().domain(yValues.map((function(value){return"".concat(value)}))).range([margin.top+20,height-margin.bottom]),xValues=dataSet.map((function(d){var sum=0;for(var _key in d)"date"!==_key&&!1===disabledItems.includes(_key)&&(sum+=d[_key]||0);return sum})),maxValueX=0===Math.max.apply(Math,_toConsumableArray(xValues))?1:Math.max.apply(Math,_toConsumableArray(xValues)),xScale=(0,d3__WEBPACK_IMPORTED_MODULE_3__.scaleLinear)().domain([0,maxValueX]).range([0,width-margin.left-margin.right]).nice().clamp(!0);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var svg=d3__WEBPACK_IMPORTED_MODULE_3__.select(ref.current);highlightItems.length>0?(svg.selectAll(".bar-data").style("opacity",.1),svg.selectAll(".bar-data-point-shape").style("opacity",.1),highlightItems.forEach((function(item){svg.selectAll('[data-label="'.concat(item,'"]')).style("opacity",.9)}))):(svg.selectAll(".bar-data").style("opacity",.9),svg.selectAll(".bar-data-point-shape").style("opacity",.9))}),[highlightItems,disabledItems]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){d3__WEBPACK_IMPORTED_MODULE_3__.select(ref.current).selectAll(".bar-data-point").raise()}),[dataSet,xValues]);var displayIsNodata=(0,_hooks_useDisplayIsNodata__WEBPACK_IMPORTED_MODULE_7__.x)({dataSet,isLoading,isNodataComponent,isNodata});(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var result=dataSet.filter((function(d){return!disabledItems.includes(String(d.label))}));return filter&&(result=result.slice().sort((function(a,b){var _a$filter$criteria,_b$filter$criteria,aVal=null!==(_a$filter$criteria=a[filter.criteria])&&void 0!==_a$filter$criteria?_a$filter$criteria:0,bVal=null!==(_b$filter$criteria=b[filter.criteria])&&void 0!==_b$filter$criteria?_b$filter$criteria:0;return"desc"===filter.sortingDir?bVal-aVal:aVal-bVal})).slice(0,filter.limit)),result}),[dataSet,filter,disabledItems]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(renderCompleteRef.current&&onChartDataProcessed){var currentMetadata={xAxisDomain:xValues.map(String),yAxisDomain:[0,maxValueX],visibleItems:keys.filter((function(key){return!disabledItems.includes(key)})),renderedData:_defineProperty({},keys[0],dataSet),chartType:"bar-bell-chart"};if(!prevChartDataRef.current||JSON.stringify(prevChartDataRef.current.xAxisDomain)!==JSON.stringify(currentMetadata.xAxisDomain)||JSON.stringify(prevChartDataRef.current.yAxisDomain)!==JSON.stringify(currentMetadata.yAxisDomain)||JSON.stringify(prevChartDataRef.current.visibleItems)!==JSON.stringify(currentMetadata.visibleItems)||JSON.stringify(Object.keys(prevChartDataRef.current.renderedData).sort())!==JSON.stringify(Object.keys(currentMetadata.renderedData).sort())){prevChartDataRef.current=currentMetadata;var timeoutId=setTimeout((function(){onChartDataProcessed(currentMetadata)}),0);return function(){return clearTimeout(timeoutId)}}}}),[yValues,maxValueX,keys,disabledItems,dataSet,onChartDataProcessed]),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{position:"relative"}},isLoading&&isLoadingComponent&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,isLoadingComponent),isLoading&&!isLoadingComponent&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_LoadingIndicator__WEBPACK_IMPORTED_MODULE_8__.A,null),displayIsNodata&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,isNodataComponent),react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{ref,height,width},children,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_Title__WEBPACK_IMPORTED_MODULE_1__.A,{x:width/2,y:margin.top/2},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_YaxisBand__WEBPACK_IMPORTED_MODULE_4__.A,{yScale,width,margin,yAxisFormat,showGrid:(null==showGrid?void 0:showGrid.y)||!1}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_shared_XaxisLinear__WEBPACK_IMPORTED_MODULE_5__.A,{xScale,height,margin,xAxisFormat,xAxisDataType,showGrid:(null==showGrid?void 0:showGrid.x)||!1,position:"top",ticks:12}),dataSet.map((function(d,i){var cumulativeX=margin.left;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{key:"group-line-".concat(i),className:"group-line group-line-".concat(i)},keys.filter((function(key){return!disabledItems.includes(key)})).map((function(key,j){var value=d[key],x=cumulativeX,width=xScale(value),shapeStyle={"--data-color":null==colorsMapping?void 0:colorsMapping[key],transition:"all 0.1s ease-out",opacity:disabledItems.includes(key)?.1:.9,background:null==colorsMapping?void 0:colorsMapping[key],borderRadius:"50%",width:"12px",height:"12px"};return cumulativeX+=width,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{key:"".concat(key,"-").concat(i)},0!==value&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("rect",{className:"bar-data","data-label":key,key:"".concat(key,"-").concat(i),x,y:yScale("".concat(null==d?void 0:d.date))+yScale.bandwidth()/2-2||0,height:4,width,fill:null==colorsMapping?void 0:colorsMapping[key],style:{transition:"all 0.1s ease-out",opacity:disabledItems.includes(key)?.1:.9},onMouseEnter:function onMouseEnter(event){onHighlightItem([key]),generateTooltip(d,key,value,event)},onMouseLeave:function onMouseLeave(){onHighlightItem([]),hideTooltip()},"data-tooltip":JSON.stringify(d)}),void 0!==value&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("foreignObject",{x:x+width-6,y:yScale("".concat(null==d?void 0:d.date))+yScale.bandwidth()/2-6,width:"12",height:"12",className:"bar-data-point ".concat(0===value?"has-value-zero":"")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{"data-label":key,"data-value":value,"data-index":j,"data-order":keys.indexOf(key)+1,"data-color":null==colorsMapping?void 0:colorsMapping[key],className:"bar-data-point-shape ".concat(0===value?"data-value-zero":""),style:shapeStyle,onMouseEnter:function onMouseEnter(event){onHighlightItem([key]),generateTooltip(d,key,value,event)},onMouseLeave:function onMouseLeave(){onHighlightItem([]),hideTooltip()}})))})))}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"tooltip",ref:refTooltip,style:{position:"absolute",opacity:0,visibility:"hidden",padding:"10px",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",borderRadius:"5px"}}))};const __WEBPACK_DEFAULT_EXPORT__=BarBellChart;BarBellChart.__docgenInfo={description:"",methods:[],displayName:"BarBellChart",props:{dataSet:{required:!1,tsType:{name:"Array",elements:[{name:"DataPoint"}],raw:"DataPoint[]"},description:"",defaultValue:{value:"[]",computed:!1}},keys:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"900",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},margin:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ top: 50, right: 50, bottom: 50, left: 50 }",computed:!1}},title:{required:!0,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},isLoadingComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodataComponent:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isNodata:{required:!1,tsType:{name:"union",raw:"boolean | ((dataSet: DataPoint[]) => boolean)",elements:[{name:"boolean"},{name:"unknown"}]},description:""},xAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number | string) => string",signature:{arguments:[{type:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},name:"d"}],return:{name:"string"}}},description:""},yAxisFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: number | string) => string",signature:{arguments:[{type:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},name:"d"}],return:{name:"string"}}},description:""},xAxisDataType:{required:!1,tsType:{name:"union",raw:'"number" | "date_annual" | "date_monthly"',elements:[{name:"literal",value:'"number"'},{name:"literal",value:'"date_annual"'},{name:"literal",value:'"date_monthly"'}]},description:""},tooltipFormat:{required:!1,tsType:{name:"signature",type:"function",raw:"(d: DataPoint, currentKey: string, currentValue: string | number) => string",signature:{arguments:[{type:{name:"DataPoint"},name:"d"},{type:{name:"string"},name:"currentKey"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"currentValue"}],return:{name:"string"}}},description:"",defaultValue:{value:"null",computed:!1}},showGrid:{required:!1,tsType:{name:"signature",type:"object",raw:"{ x: boolean; y: boolean }",signature:{properties:[{key:"x",value:{name:"boolean",required:!0}},{key:"y",value:{name:"boolean",required:!0}}]}},description:"",defaultValue:{value:"{\r\n  x: false,\r\n  y: false,\r\n}",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},onChartDataProcessed:{required:!1,tsType:{name:"signature",type:"function",raw:"(metadata: ChartMetadata) => void",signature:{arguments:[{type:{name:"ChartMetadata"},name:"metadata"}],return:{name:"void"}}},description:""},onHighlightItem:{required:!1,tsType:{name:"signature",type:"function",raw:"(labels: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"labels"}],return:{name:"void"}}},description:""},filter:{required:!1,tsType:{name:"signature",type:"object",raw:"{ limit: number; criteria: string; sortingDir: string }",signature:{properties:[{key:"limit",value:{name:"number",required:!0}},{key:"criteria",value:{name:"string",required:!0}},{key:"sortingDir",value:{name:"string",required:!0}}]}},description:""}}}},"./src/components/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_X:()=>_MichiVzProvider__WEBPACK_IMPORTED_MODULE_0__._});var _MichiVzProvider__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/MichiVzProvider.tsx");__webpack_require__("./src/components/LineChart.tsx"),__webpack_require__("./src/components/VerticalStackBarChart.tsx"),__webpack_require__("./src/components/RibbonChart.tsx"),__webpack_require__("./src/components/AreaChart.tsx"),__webpack_require__("./src/components/RadarChart.tsx"),__webpack_require__("./src/components/BarBellChart.tsx"),__webpack_require__("./src/components/ComparableHorizontalBarChart.tsx"),__webpack_require__("./src/components/DualHorizontalBarChart.tsx"),__webpack_require__("./src/components/RangeChart.tsx"),__webpack_require__("./src/components/ScatterPlotChart.tsx"),__webpack_require__("./src/components/shared/LoadingIndicator.tsx")}}]);