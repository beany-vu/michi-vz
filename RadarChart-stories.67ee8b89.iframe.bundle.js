"use strict";(self.webpackChunkmichi_vz=self.webpackChunkmichi_vz||[]).push([[603],{"./stories/RadarChart.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>RadarChart_stories});var _templateObject,_templateObject2,_templateObject3,_templateObject4,react=__webpack_require__("./node_modules/react/index.js"),src=__webpack_require__("./node_modules/d3/src/index.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),range=__webpack_require__("./node_modules/lodash/range.js"),range_default=__webpack_require__.n(range),MichiVzProvider=__webpack_require__("./src/components/MichiVzProvider.tsx");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _Primary$parameters,_Primary$parameters2,Polygon=styled_components_browser_esm.ZP.polygon(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  stroke-linejoin: round;\n  pointer-events: stroke;\n  transition: all 0.2s ease-out;\n"]))),DataPointStyled=styled_components_browser_esm.ZP.circle(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n  transition: opacity 0.3s ease-out;\n"]))),DataPoints=styled_components_browser_esm.ZP.g(_templateObject3||(_templateObject3=_taggedTemplateLiteral(["\n  &.highlight {\n    "," {\n      opacity: 1;\n      pointer-events: auto;\n    }\n  }\n"])),DataPointStyled),Tooltip=styled_components_browser_esm.ZP.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral(["\n  position: absolute;\n  padding: 5px 10px;\n  border-radius: 4px;\n  pointer-events: none;\n  z-index: 1000;\n  transition: opacity 0.3s;\n  font-size: 12px;\n"]))),RadarChart=function RadarChart(_ref){var width=_ref.width,height=_ref.height,seriesData=_ref.seriesData,poles=_ref.poles,tooltipFormatter=_ref.tooltipFormatter,children=_ref.children,_useChartContext=(0,MichiVzProvider.P)(),colorsMapping=_useChartContext.colorsMapping,highlightItems=_useChartContext.highlightItems,setHighlightItems=_useChartContext.setHighlightItems,svgRef=(0,react.useRef)(null),_useState2=_slicedToArray((0,react.useState)(null),2),tooltipData=_useState2[0],setTooltipData=_useState2[1],tooltipRef=(0,react.useRef)(null),yScaleDomain=(0,react.useMemo)((function(){return seriesData?[0,Math.max.apply(Math,_toConsumableArray(seriesData.map((function(d){return d.data})).flat().map((function(d){return d.value}))))]:[0,30]}),[]),yScale=(0,react.useMemo)((function(){return src.BYU().domain(yScaleDomain).range([0,height/2-30])}),[poles,height]),processedSeriesData=seriesData.map((function(item){return _objectSpread(_objectSpread({},function genPolygonPoints(data,scale){var step=2*Math.PI/data.length,points=new Array(data.length).fill({x:null,y:null,date:null,value:null}),pointString=data.reduce((function(res,cur,i){if(i>data.length)return res;if(null==cur||!cur.value)return res;var angle=i*step-Math.PI/2,xVal=Math.round(width/2+scale(cur.value)*Math.sin(angle)),yVal=Math.round(height/2+scale(cur.value)*Math.cos(angle));return points[i]={x:xVal,y:yVal,date:cur.date,value:cur.value},res+"".concat(xVal,",").concat(yVal," ")}),"");return{points,pointString}}(item.data,yScale)),item)}));return(0,react.useEffect)((function(){for(var svg=src.Ys(svgRef.current),i=0;i<12;i++){var angle=i/12*2*Math.PI,x1=width/2,y1=height/2,x2=width/2+Math.sin(angle)*(height/2-30),y2=height/2-Math.cos(angle)*(height/2-30),line=src.jvg()([[x1,y1],[x2,y2]]);svg.append("path").attr("d",line).attr("stroke","#c1c1c1").attr("stroke-width",1).lower()}range_default()(1,7).map((function(value){return height/2*(value/6)})).forEach((function(radius){svg.append("circle").attr("cx",width/2).attr("cy",height/2).attr("r",radius-30).attr("fill","transparent").attr("stroke","#c1c1c1").attr("stroke-width",1).attr("stroke-dasharray","2,2").lower()}));var labelRadius=height/2-15;poles.labels.forEach((function(label,i){var angle=i/poles.labels.length*2*Math.PI,lx=width/2+Math.sin(angle)*labelRadius,ly=height/2-Math.cos(angle)*labelRadius;svg.append("text").attr("class","pole-label").attr("x",lx).attr("y",ly).attr("dy",".35em").attr("text-anchor",(function(){return i===poles.labels.length/2?"middle":lx<width/2?"end":lx>width/2?"start":"middle"})).text(label)}))}),[width,height,seriesData,poles]),(0,react.useEffect)((function(){var svg=src.Ys(svgRef.current);svg.selectAll(".series").attr("opacity",0===highlightItems.length?1:.3),svg.selectAll(".data-point").attr("opacity",0),highlightItems.forEach((function(item){svg.selectAll(".series-".concat(item.replaceAll(" ","-"))).attr("opacity",1).raise(),svg.selectAll(".data-point-".concat(item.replaceAll(" ","-"))).attr("opacity",1).raise()}))}),[highlightItems]),react.createElement("div",{style:{position:"relative"}},react.createElement(Tooltip,{ref:tooltipRef,style:{display:"none"}},tooltipData&&react.createElement(react.Fragment,null,tooltipFormatter?tooltipFormatter(tooltipData):react.createElement(react.Fragment,null,react.createElement("strong",null,"Date:")," ",tooltipData.date,react.createElement("br",null),react.createElement("strong",null,"Value:")," ",tooltipData.value))),react.createElement("svg",{width,height,style:{overflow:"visible"},ref:svgRef},children,processedSeriesData.map((function(_ref2,i){var _colorsMapping$label,label=_ref2.label,pointString=_ref2.pointString,points=_ref2.points,color=_ref2.color;return react.createElement("g",{key:"series-".concat(i),className:"series series-".concat(i," series-").concat(label.replaceAll(" ","-"))},react.createElement(Polygon,{points:pointString,fill:"transparent","data-label":colorsMapping[label],stroke:null!==(_colorsMapping$label=colorsMapping[label])&&void 0!==_colorsMapping$label?_colorsMapping$label:color,strokeWidth:5,onMouseMove:function onMouseMove(event){event.preventDefault(),setHighlightItems([label])},onMouseOut:function onMouseOut(event){event.preventDefault(),setHighlightItems([])}}),react.createElement(DataPoints,{className:"data-points data-points-".concat(i)},points.map((function(point,j){var _colorsMapping$label2;return react.createElement("g",{key:"data-point-".concat(j)},null!==point.x&&null!==point.y&&react.createElement(DataPointStyled,{className:"data-point data-point-".concat(i," data-point-").concat(label.replaceAll(" ","-")),r:6,cx:point.x,cy:point.y,stroke:"#fff",strokeWidth:3,fill:null!==(_colorsMapping$label2=colorsMapping[label])&&void 0!==_colorsMapping$label2?_colorsMapping$label2:color,onMouseOver:function onMouseOver(e){setHighlightItems([label]),setTooltipData({date:point.date,value:point.value}),tooltipRef.current&&(tooltipRef.current.style.top="".concat(e.clientY,"px"),tooltipRef.current.style.left="".concat(e.clientX+10,"px"),tooltipRef.current.style.display="block")},onMouseOut:function onMouseOut(){setTooltipData(null),tooltipRef.current&&(tooltipRef.current.style.display="none")}}))}))))}))))};try{RadarChart.displayName="RadarChart",RadarChart.__docgenInfo={description:"",displayName:"RadarChart",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"any"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"any"}},seriesData:{defaultValue:null,description:"",name:"seriesData",required:!0,type:{name:"any"}},poles:{defaultValue:null,description:"",name:"poles",required:!0,type:{name:"any"}},tooltipFormatter:{defaultValue:null,description:"",name:"tooltipFormatter",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RadarChart.tsx#RadarChart"]={docgenInfo:RadarChart.__docgenInfo,name:"RadarChart",path:"src/components/RadarChart.tsx#RadarChart"})}catch(__react_docgen_typescript_loader_error){}function RadarChart_stories_typeof(o){return RadarChart_stories_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},RadarChart_stories_typeof(o)}function RadarChart_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function RadarChart_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?RadarChart_stories_ownKeys(Object(t),!0).forEach((function(r){RadarChart_stories_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):RadarChart_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function RadarChart_stories_defineProperty(obj,key,value){return(key=function RadarChart_stories_toPropertyKey(arg){var key=function RadarChart_stories_toPrimitive(input,hint){if("object"!==RadarChart_stories_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==RadarChart_stories_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===RadarChart_stories_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const RadarChart_stories={title:"Charts/Radar Chart",components:RadarChart,tags:["autodocs"],decorators:[function(Story){return react.createElement(MichiVzProvider.R,{initialColorsMapping:{China:"purple",USA:"blue",Germany:"green",France:"#17BECF",UAE:"#D62728"},initialHighlightItems:["France"]},react.createElement(Story,null))}]};var Primary=function Template(args){return react.createElement(RadarChart,args)}.bind({});Primary.args={width:400,height:400,seriesData:[{label:"China",color:"#1F77B4",data:[{partner:"156",value:"120",date:"Jan"},{partner:"156",value:"84",date:"Feb"},{partner:"156",value:"86",date:"Mar"},{partner:"156",value:"66",date:"Apr"},{partner:"156",value:"170",date:"May"},{partner:"156",value:"80",date:"Jun"},{partner:"156",value:"132",date:"Jul"},{partner:"156",value:"85",date:"Aug"},{partner:"156",value:"102",date:"Sep"},{partner:"156",value:"113",date:"Oct"},{partner:"156",value:"105",date:"Nov"},{partner:"156",value:"86",date:"Dec"}],partner:"156"},{label:"UAE",color:"#D62728",data:[{partner:"784",value:"235",date:"Jan"},{partner:"784",value:"245",date:"Feb"},{partner:"784",value:"284",date:"Mar"},{partner:"784",value:"259",date:"Apr"},{partner:"784",value:"484",date:"May"},{partner:"784",value:"221",date:"Jun"},{partner:"784",value:"285",date:"Jul"},{partner:"784",value:"332",date:"Aug"},{partner:"784",value:"217",date:"Sep"},{partner:"784",value:"276",date:"Oct"},{partner:"784",value:"278",date:"Nov"},{partner:"784",value:"250",date:"Dec"}],partner:"784"},{label:"France",color:"#17BECF",data:[{partner:"251",value:"947",date:"Jan"},{partner:"251",value:"793",date:"Feb"},{partner:"251",value:"738",date:"Mar"},{partner:"251",value:"1066",date:"Apr"},{partner:"251",value:"2317",date:"May"},{partner:"251",value:"1947",date:"Jun"},{partner:"251",value:"2117",date:"Jul"},{partner:"251",value:"1343",date:"Aug"},{partner:"251",value:"808",date:"Sep"},{partner:"251",value:"1093",date:"Oct"},{partner:"251",value:"920",date:"Nov"},{partner:"251",value:"630",date:"Dec"}],partner:"251"}],poles:{range:[0,3*Math.PI],domain:[360,0],labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},conf:{padding:30,tooltipContent:function tooltipContent(_ref){var item=_ref.item;return react.createElement(react.Fragment,null,JSON.stringify(item))},radialScale:{range:[0,3*Math.PI],domain:[360,0]},gridAngle:{style:{stroke:"#c1c1c1",strokeWidth:1},numTicks:12},gridRadial:{style:{stroke:"#c1c1c1",strokeWidth:0,numTicks:5,fill:"transparent",fillOpacity:0,strokeDasharray:"2,2"},label:{style:{color:"#ccc",fontWeight:"bold"}}},axes:{topVertical:{style:{fontSize:12,dx:15,dy:3,textAnchor:"end",stroke:"red",strokeWidth:.5},formatter:function formatter(value){return value}}},seriesData:[]}},Primary.parameters=RadarChart_stories_objectSpread(RadarChart_stories_objectSpread({},Primary.parameters),{},{docs:RadarChart_stories_objectSpread(RadarChart_stories_objectSpread({},null===(_Primary$parameters=Primary.parameters)||void 0===_Primary$parameters?void 0:_Primary$parameters.docs),{},{source:RadarChart_stories_objectSpread({originalSource:"args => <RadarChart {...args} />"},null===(_Primary$parameters2=Primary.parameters)||void 0===_Primary$parameters2||null===(_Primary$parameters2=_Primary$parameters2.docs)||void 0===_Primary$parameters2?void 0:_Primary$parameters2.source)})});const __namedExportsOrder=["Primary"]},"./src/components/MichiVzProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useChartContext,R:()=>MichiVzProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var defaultChartContext={disabledItems:[],setDisabledItems:function setDisabledItems(){},highlightItems:[],setHighlightItems:function setHighlightItems(){},colorsMapping:{},setColorsMapping:function setColorsMapping(){},colorsBasedMapping:{},setColorsBasedMapping:function setColorsBasedMapping(){}},MichiVzContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(defaultChartContext),MichiVzProvider=function MichiVzProvider(_ref){var children=_ref.children,_ref$initialDisabledI=_ref.initialDisabledItems,initialDisabledItems=void 0===_ref$initialDisabledI?[]:_ref$initialDisabledI,_ref$initialHighlight=_ref.initialHighlightItems,initialHighlightItems=void 0===_ref$initialHighlight?[]:_ref$initialHighlight,_ref$initialColorsMap=_ref.initialColorsMapping,initialColorsMapping=void 0===_ref$initialColorsMap?{}:_ref$initialColorsMap,_ref$initialColorsBas=_ref.initialColorsBasedMapping,initialColorsBasedMapping=void 0===_ref$initialColorsBas?{}:_ref$initialColorsBas,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialDisabledItems),2),disabledItems=_useState2[0],setDisabledItems=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialHighlightItems),2),highlightItems=_useState4[0],setHighlightItems=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialColorsMapping),2),colorsMapping=_useState6[0],setColorsMapping=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialColorsBasedMapping),2),colorsBasedMapping=_useState8[0],setColorsBasedMapping=_useState8[1];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MichiVzContext.Provider,{value:{disabledItems,setDisabledItems,highlightItems,setHighlightItems,colorsMapping,setColorsMapping,colorsBasedMapping,setColorsBasedMapping}},children)},useChartContext=function useChartContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(MichiVzContext)};try{MichiVzProvider.displayName="MichiVzProvider",MichiVzProvider.__docgenInfo={description:"",displayName:"MichiVzProvider",props:{initialDisabledItems:{defaultValue:{value:"[]"},description:"",name:"initialDisabledItems",required:!1,type:{name:"string[]"}},initialHighlightItems:{defaultValue:{value:"[]"},description:"",name:"initialHighlightItems",required:!1,type:{name:"string[]"}},initialColorsMapping:{defaultValue:{value:"{}"},description:"",name:"initialColorsMapping",required:!1,type:{name:"{ [key: string]: string; }"}},initialColorsBasedMapping:{defaultValue:{value:"{}"},description:"",name:"initialColorsBasedMapping",required:!1,type:{name:"{ [key: string]: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/MichiVzProvider.tsx#MichiVzProvider"]={docgenInfo:MichiVzProvider.__docgenInfo,name:"MichiVzProvider",path:"src/components/MichiVzProvider.tsx#MichiVzProvider"})}catch(__react_docgen_typescript_loader_error){}}}]);